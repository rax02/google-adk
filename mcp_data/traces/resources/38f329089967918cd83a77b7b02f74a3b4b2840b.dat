AdfUIComponents.createComponentClass("AdfRichMenuBar",{componentType:"oracle.adf.RichMenuBar",propertyKeys:[{name:"inlineStyle",type:"String"},{name:"styleClass",type:"String"},{name:"shortDesc",type:"String"},{name:"unsecure",type:"Object",secured:!0},{name:"visible",type:"Boolean","default":!0},{name:"flex",type:"Number","default":0},{name:"stretchId",type:"String"},{name:"disabled",type:"Boolean","default":!1,secured:!0}],superclass:AdfUIPanel});
AdfRichUIPeer.createPeerClass(AdfRichUIPeer,"AdfDhtmlMenuBarPeer",!1);AdfDhtmlMenuBarPeer.InitSubclass=function(){AdfRichUIPeer.addComponentEventHandlers(this,AdfUIInputEvent.KEY_UP_EVENT_TYPE,AdfUIInputEvent.KEY_DOWN_EVENT_TYPE,AdfUIInputEvent.KEY_PRESS_EVENT_TYPE,AdfUIInputEvent.FOCUS_EVENT_TYPE)};
AdfDhtmlMenuBarPeer.prototype.InitDomElement=function(a,b){AdfDhtmlMenuBarPeer.superclass.InitDomElement.call(this,a,b);var c=a.getClientId(),d=AdfRichUIPeer.CreateSubId(c,"eoc"),e=AdfAgent.AGENT;this._isOverflowSupported=(this._overflowContainer=e.getElementById(d))?!0:!1;1==this._isOverflowSupported&&(d=AdfRichUIPeer.CreateSubId(c,"eoi"),this._overflowIndicator=e.getElementById(d),AdfPage.PAGE.__registerDescendantResizeNotifyComponent(a));c=b.getElementsByTagName("table")[0];this._childContainers=
e.getTableRowCells(e.getTableRow(c,0));this._activeDescendant=AdfFocusUtils.setFirstActiveDescendant(b)};AdfDhtmlMenuBarPeer.prototype.needsChildVisibilityChanges=function(a){return!0};AdfDhtmlMenuBarPeer.prototype.needsResizeNotify=function(a){return!0};AdfDhtmlMenuBarPeer.prototype.getDescendantComponents=function(a,b){b||(b=[]);AdfDhtmlMenuBarPeer.superclass.getDescendantComponents.call(this,a,b);1==this._isOverflowSupported&&AdfOverflowSupport.getOverflowChildComponents(a,b);return b};
AdfDhtmlMenuBarPeer.prototype.updateScrollIconsState=function(){};AdfDhtmlMenuBarPeer.prototype.resetActiveDescendant=function(){this._activeDescendant&&this._activeDescendant.setAttribute("tabIndex","-1");this._activeDescendant=AdfFocusUtils.setFirstActiveDescendant(this.getDomElement())};
AdfDhtmlMenuBarPeer.prototype.ResizeNotify=function(a,b,c,d){a=this.getDomElement();b=this.getComponent();c=b.getClientId();if(0!=this._isOverflowSupported||b.getStretchId()){this._unStretch();if(1==this._isOverflowSupported){if(!this._overflowSupport)for(this._overflowSupport=new AdfOverflowSupport(c,this,"end",null,null,!0),a=a.getElementsByTagName("table")[0],b=AdfAgent.AGENT,a=b.getTableRowCells(b.getTableRow(a,0)),b=0,c=a[0];c;){this._overflowSupport.createStep();this._overflowSupport.addElement(c);
if(c=AdfDomUtils.getFirstChildElement(c))d=AdfPage.PAGE.findComponent(c.id),void 0!=window.AdfRichSpacer&&d instanceof AdfRichSpacer||(c=this._createOverflowElement(c),this._overflowSupport.addOverflowElement(c));b++;c=a[b]}this._overflowSupport.handleResize()}this._reStretch();this._activeDescendant&&(0<this._activeDescendant.offsetWidth||0<this._activeDescendant.offsetHeight)||this.resetActiveDescendant()}};
AdfDhtmlMenuBarPeer.prototype.ChildVisibilityChanged=function(a,b,c){AdfPage.PAGE.addPartialTargets(this.getComponent());return!1};AdfDhtmlMenuBarPeer.prototype.GetPreferredWidth=function(){if(!this._preferredWidth){var a=this.getDomElement().firstChild;this._unStretch();this._overflowSupport&&this._overflowSupport.removeAllItemsFromOverflow();this._preferredWidth=a.offsetWidth;this._reStretch()}return this._preferredWidth};
AdfDhtmlMenuBarPeer.prototype.GetMinimumWidth=function(){if(!this._minimumWidth)if(0==this._isOverflowSupported)this._minimumWidth=this.GetPreferredWidth();else if(this._childContainers&&0<this._childContainers.length){var a=this._overflowIndicator.style.display;this._overflowIndicator.style.display="block";this._minimumWidth=this._overflowIndicator.offsetWidth;this._overflowIndicator.style.display=a;a=this.GetPreferredWidth();this._minimumWidth>a&&(this._minimumWidth=a)}else this._minimumWidth=0;
return this._minimumWidth};AdfDhtmlMenuBarPeer.prototype.HandleComponentKeyDown=function(a){if(!a.isCanceled()&&AdfAgent.AGENT.getPreferredKeyEventForRepetition()==AdfUIInputEvent.KEY_DOWN_EVENT_TYPE){var b=a.getKeyCode();this._handleArrowKeys(b,a)}};AdfDhtmlMenuBarPeer.prototype.HandleComponentKeyPress=function(a){if(!a.isCanceled()&&AdfAgent.AGENT.getPreferredKeyEventForRepetition()==AdfUIInputEvent.KEY_PRESS_EVENT_TYPE){var b=a.getKeyCode();this._handleArrowKeys(b,a)}};
AdfDhtmlMenuBarPeer.prototype.HandleComponentKeyUp=function(a){var b=this.getComponent();a.isCanceled()||b.getDisabled()||AdfDhtmlMenuBarPeer._handleMenuBarItemAccessKeys(b,a)};
AdfDhtmlMenuBarPeer.prototype.HandleComponentFocus=function(a){var b=a.getSource(),c=b.getClientId(),c=AdfAgent.AGENT.getElementById(c),d=a.getNativeEvent(),d=AdfAgent.AGENT.getEventTarget(d);d==this._overflowIndicator?this._activeDescendant!=d&&this._updateActiveDescendant(this._overflowIndicator):AdfMenuUtils.isInOverflow(c)?(b=AdfFocusUtils.getFirstFocusableDescendant(c))&&this._overflowSupport.updateActiveDescendant(b):AdfMenuUtils.isOnMenuBar(b)&&(b=AdfFocusUtils.getFirstFocusableDescendant(c))&&
b!=this._activeDescendant&&this._updateActiveDescendant(b);a.cancel()};AdfDhtmlMenuBarPeer.prototype.ComponentRemoved=function(a){delete this._overflowContainer;delete this._overflowIndicator;delete this._childContainers;this._overflowSupport&&(this._overflowSupport.removeOverflowSupport(),delete this._overflowSupport);AdfPage.PAGE.__unregisterDescendantResizeNotifyComponent(a);AdfDhtmlMenuBarPeer.superclass.ComponentRemoved.call(this,a)};
AdfDhtmlMenuBarPeer._handleMenuBarItemAccessKeys=function(a,b){var c=b.getKeyStroke(),d=c.getModifiers();if(!(d&AdfKeyStroke.CTRL_MASK||d&AdfKeyStroke.ALT_MASK||d&AdfKeyStroke.META_MASK)){d&AdfKeyStroke.SHIFT_MASK&&(d>>=AdfKeyStroke.SHIFT_MASK,c=AdfKeyStroke.getKeyStroke(c.getKeyCode(),d));for(var c=c.toMarshalledString().toUpperCase(),d=a.getClientId(),d=AdfAgent.AGENT.getElementById(d).getElementsByTagName("A"),e=d.length,f=0;f<e;f++){var g=d[f];if(g&&1==g.nodeType){var h=g.getAttribute("accessKey");
if(h&&c==h.toUpperCase()){AdfFocusUtils.focusElement(g);b.cancel();break}}}}};
AdfDhtmlMenuBarPeer.prototype._handleArrowKeys=function(a,b){var c=b.getNativeEvent();if(!(c.ctrlKey||c.altKey||c.shiftKey||c.metaKey)){var c=b.getSource().getPeer().getDomElement(),d=b.getSource();if(AdfMenuUtils.isInOverflow(c))switch(a){case AdfKeyStroke.ARROWRIGHT_KEY:d instanceof AdfRichMenu&&(d.getPeer().show(null,!0),b.cancel());break;case AdfKeyStroke.ARROWUP_KEY:this._overflowSupport.focusPreviousChild(this._overflowContainer);b.cancel();break;case AdfKeyStroke.ARROWDOWN_KEY:this._overflowSupport.focusNextChild(this._overflowContainer),
b.cancel()}else switch(a){case AdfKeyStroke.ARROWDOWN_KEY:d instanceof AdfRichMenu&&(AdfDomUtils.addCSSClassName(c,AdfMenuUtils.DEPRESSED_STYLE_CLASS),d.getPeer().show(null,!0),b.cancel());break;case AdfKeyStroke.ARROWLEFT_KEY:this._moveHighlightToPreviousBarItem(b);b.cancel();break;case AdfKeyStroke.ARROWRIGHT_KEY:this._moveHighlightToNextBarItem(b),b.cancel()}}};
AdfDhtmlMenuBarPeer.prototype._updateActiveDescendant=function(a){AdfAssert.assertDomElement(a);this._activeDescendant&&this._activeDescendant.setAttribute("tabIndex","-1");a.setAttribute("tabIndex","0");this._activeDescendant=a};AdfDhtmlMenuBarPeer.prototype._moveHighlightToPreviousBarItem=function(a){this._canMoveFocus()&&(a=this.getDomElement(),(a=AdfFocusUtils.focusPreviousActiveDescendant(a,this._activeDescendant))?this._activeDescendant=a:AdfFocusUtils.focusPreviousTabStop(this._activeDescendant))};
AdfDhtmlMenuBarPeer.prototype._moveHighlightToNextBarItem=function(a){this._canMoveFocus()&&(a=this.getDomElement(),(a=AdfFocusUtils.focusNextActiveDescendant(a,this._activeDescendant))?this._activeDescendant=a:AdfFocusUtils.focusNextTabStop(this._activeDescendant))};
AdfDhtmlMenuBarPeer.prototype._canMoveFocus=function(){AdfAssert.assertDomElement(this._activeDescendant);AdfAssert.assert("0"==this._activeDescendant.getAttribute("tabindex"),"The menuBar's active descendant should have tabindex 0");this._activeDescendant||(AdfLogger.LOGGER.warning("MenuBar has lost its assigned activeDescendant!"),this.resetActiveDescendant());return null!=this._activeDescendant};
AdfDhtmlMenuBarPeer.prototype._unStretch=function(){var a=this._getStretchElement();a&&(a.parentNode.style.width="")};AdfDhtmlMenuBarPeer.prototype._reStretch=function(){var a=this._getStretchElement();if(a){var b=AdfAgent.AGENT.getWindowWidth()+"px";a.parentNode.style.width=b}};
AdfDhtmlMenuBarPeer.prototype._createOverflowElement=function(a){var b=a.ownerDocument.createElement("table");b.cellPadding=0;b.cellSpacing=0;b.style.width="100%";b.setAttribute("role","presentation");var c=b.insertRow(-1).insertCell(-1);c.style.width="100%";c.setAttribute(AdfMenuUtils.OVERFLOW_KEY,"true");a=this._overflowSupport.createSwapPosition(a);c.appendChild(a);return b};
AdfDhtmlMenuBarPeer.prototype._getStretchElement=function(){var a=this.getComponent(),b=a.getStretchId();if(b){if(a=a.findComponent(b))return b=a.getClientId(),AdfAgent.AGENT.getElementById(b);AdfLogger.LOGGER.warning("Unable to find client component for stretch id "+b)}return null};AdfDhtmlMenuBarPeer.prototype.SimulateMouseOnDescendant=function(a,b,c){AdfDhtmlMenuBarPeer.superclass.SimulateMouseOnDescendant.call(this,a,b,c);this._isOverflowSupported&&this._overflowSupport.isInOverflow(b)&&this._overflowSupport.showOverflowPopup()};
AdfRichUIPeer.createPeerClass(AdfRichUIPeer,"AdfDhtmlMenuPeer",!1);
AdfDhtmlMenuPeer.InitSubclass=function(){AdfObject.ensureClassInitialization(AdfMenuUtils);AdfObject.ensureClassInitialization(AdfSwipeSupport);AdfRichUIPeer.addComponentEventHandlers(this,AdfUIInputEvent.MOUSE_DOWN_EVENT_TYPE,AdfUIInputEvent.MOUSE_UP_EVENT_TYPE,AdfUIInputEvent.FOCUS_EVENT_TYPE,AdfUIInputEvent.BLUR_EVENT_TYPE,AdfUIInputEvent.KEY_UP_EVENT_TYPE,AdfUIInputEvent.KEY_DOWN_EVENT_TYPE,AdfUIInputEvent.KEY_PRESS_EVENT_TYPE);AdfAgent.AGENT.isTouchFirstDevice()||AdfRichUIPeer.addComponentEventHandlers(this,
AdfUIInputEvent.MOUSE_IN_EVENT_TYPE,AdfUIInputEvent.MOUSE_OUT_EVENT_TYPE);AdfRichUIPeer.addComponentPropertyChanges(this,AdfRichMenu.DISABLED,AdfRichMenu.VISIBLE,AdfRichMenu.TEXT);this._sBarMenus=[];this._sDetachedMenus=[];this._SCROLL_DELTA=3;this._JUMP_SCROLL_DELTA=15;this._OPEN_CLOSE_DELAY=300;var a=AdfKeyStroke.M_KEY,b=AdfKeyStroke.SHIFT_MASK|AdfKeyStroke.CTRL_MASK;this._menuBarKeyStroke=AdfKeyStroke.getKeyStroke(a,b);a=AdfKeyStroke.W_KEY;b=AdfKeyStroke.SHIFT_MASK|AdfKeyStroke.CTRL_MASK;this._focusDetachedMenuKeyStroke=
AdfKeyStroke.getKeyStroke(a,b)};AdfDhtmlMenuPeer.prototype.Init=function(a){a.getParent();AdfDhtmlMenuPeer.superclass.Init.call(this,a);a=AdfPage.PAGE.getLookAndFeel();a=parseInt(a.getSkinProperty("af|menu-tr-visible-items"));this._maxDisplayItems=isNaN(a)?14:a;this._spaceKeyDown=this._enterKeyDown=this._isDetached=!1};AdfDhtmlMenuPeer.prototype.InitDomElement=function(a,b){if("1"==b.getAttribute(AdfMenuUtils.MENU_DEPTH_KEY)){var c=a.getClientId();AdfDhtmlMenuPeer._addBarMenu(c)}};
AdfDhtmlMenuPeer.cancelShowing=function(){AdfDhtmlMenuPeer._popupShowingHandle&&(window.clearTimeout(AdfDhtmlMenuPeer._popupShowingHandle),delete AdfDhtmlMenuPeer._popupShowingHandle,delete AdfDhtmlMenuPeer._popupPeerWaitingForShow)};
AdfDhtmlMenuPeer.prototype.show=function(a,b){var c=this.getDomElement(),d=this.getComponent(),e=d.getClientId();AdfDomUtils.addCSSClassName(c,AdfMenuUtils.HIGHLIGHTED_STYLE_CLASS);!this.isContextMenu()&&this.isRootMenu()&&AdfMenuUtils.setLastOpenedRootMenuId(e);null==b&&(c=a[AdfDhtmlPopupWindow.HINT_FOCUS],b=null!=c?c:this.isContextMenu()?!0:!1);this._reattachMenu();if("noContent"==this._getLazyState())this._setLazyState("fetching"),e={},e.menuDepth=this._getDepth(),this._lazyFetchPopupHints=a,this._lazyFetchFocusOnFirstElement=
b,(new AdfContentFetchEvent(d,AdfContentFetchEvent.FETCH_EVENT_TYPE,e)).queue(),this._showFetchingDataPopup();else if("fetching"==this._getLazyState())AdfLogger.LOGGER.info("Currently waiting on menu content fetch: "+d.getClientId());else if(c=this._getMenuElement(),"block"==c.style.display)b&&AdfFocusUtils.focusElement(this._activeDescendant);else{this.resetActiveDescendant();var f=this._createMenuPopupHints(a,b);c.style.display="block";var g=this._elemsInitialized;g||(c.style.visibility="hidden");
this.showPopup(d,c,f,e);g||(this._initElements(d,e,c),c.style.visibility="",this._elemsInitialized=!0,this._areScrollButtonsDisplayed&&this._moveShadow(!0));this._areScrollButtonsDisplayed&&(this._scrollBoxElement.scrollTop=0,this.updateScrollIconsState());this._isDetachable()&&this._createDetachableWindow()}};AdfDhtmlMenuPeer.prototype.showPopup=function(a,b,c,d){AdfMenuUtils.addOpenMenu(d);AdfDhtmlMenuPeer.superclass.showPopup.call(this,a,b,c,d)};
AdfDhtmlMenuPeer.prototype.hidePopup=function(){var a=this.getComponent(),b=a.getClientId();this._handleHideRequest(a,b);this.isDetached()||(AdfDhtmlMenuPeer.superclass.hidePopup.call(this,a,b),this._isDetachable()&&(this._detachableWindow&&this._detachableWindow.destroy(),delete this._detachableWindow))};
AdfDhtmlMenuPeer.prototype.cancelPopup=function(){var a=this.getComponent(),b=a.getClientId();this.isDetached()?b==AdfDhtmlMenuPeer._reattachedMenuId&&AdfDhtmlMenuPeer._redetachMenu():(this._handleHideRequest(a,b),AdfDhtmlMenuPeer.superclass.cancelPopup.call(this,a,b))};
AdfDhtmlMenuPeer.prototype.close=function(a,b){var c=this.getComponent();if(this.isDetached()){AdfDomUtils.addCSSClassName(this._getMenuElement(),AdfMenuUtils.DETACHED_STYLE_CLASS);if(this._detachedMenuLeft&&this._detachedMenuTop){var d=this._detachableWindow.getElement();d.style.left=this._detachedMenuLeft;d.style.top=this._detachedMenuTop}b||this._deselectElement();d=c.getClientId();AdfDhtmlMenuPeer._removeFromDetachedMenus(d);AdfDhtmlMenuPeer.superclass.hidePopup.call(this,c,d)}else this.isContextMenu()?
c.getParent().hide():(a?this.hidePopup():this._delayPopupHiding(),b||this._deselectElement())};AdfDhtmlMenuPeer.prototype.isDetached=function(){return this._isDetached};AdfDhtmlMenuPeer.prototype.isContextMenu=function(){return this.getComponent().getParent()instanceof AdfRichPopup};AdfDhtmlMenuPeer.prototype.isRootMenu=function(){return 1==this._getDepth()};
AdfDhtmlMenuPeer.prototype.updateScrollIconsState=function(){if(this._areScrollButtonsDisplayed){for(var a=this._scrollContentElement.rows,b=a.length,c=0,d=0,e=0;e<b;e++){var f=a[e];if("none"!=f.style.display){c=e;break}}for(e=b-1;-1<e;e--)if(f=a[e],"none"!=f.style.display){d=e;break}e=AdfAgent.AGENT;f=!1;b=e.getElementPageBounds(this._scrollBoxElement);c=e.getElementPageBounds(a[c]);a=e.getElementPageBounds(a[d]);f=90<=(b.bottom-a.top)/(a.bottom-a.top)*100;90<=(c.bottom-b.top)/(c.bottom-c.top)*100?
(AdfDomUtils.addCSSClassName(this._scrollUpElement,AdfRichUIPeer.DISABLED_STYLECLASS),AdfDomUtils.addCSSClassName(this._scrollUpBackgroundElement,AdfRichUIPeer.DISABLED_STYLECLASS)):(AdfDomUtils.removeCSSClassName(this._scrollUpElement,AdfRichUIPeer.DISABLED_STYLECLASS),AdfDomUtils.removeCSSClassName(this._scrollUpBackgroundElement,AdfRichUIPeer.DISABLED_STYLECLASS));f?(AdfDomUtils.addCSSClassName(this._scrollDownElement,AdfRichUIPeer.DISABLED_STYLECLASS),AdfDomUtils.addCSSClassName(this._scrollDownBackgroundElement,
AdfRichUIPeer.DISABLED_STYLECLASS)):(AdfDomUtils.removeCSSClassName(this._scrollDownElement,AdfRichUIPeer.DISABLED_STYLECLASS),AdfDomUtils.removeCSSClassName(this._scrollDownBackgroundElement,AdfRichUIPeer.DISABLED_STYLECLASS))}};AdfDhtmlMenuPeer.prototype.resetActiveDescendant=function(){this._activeDescendant&&this._activeDescendant.setAttribute("tabIndex","-1");var a=this._getMenuElement();this._activeDescendant=AdfFocusUtils.setFirstActiveDescendant(a,{includeVisibilityHidden:!0,includeDisplayNone:!0})};
AdfDhtmlMenuPeer.prototype.ReplaceDomElement=function(a,b){if("fetching"!=this._getLazyState())AdfDhtmlMenuPeer.superclass.ReplaceDomElement.call(this,a,b);else{var c=AdfDomUtils.getFirstChildElement(a);null==c?(AdfLogger.LOGGER.warning("Unexpected element received by AdfDhtmlMenuPeer.prototype.ReplaceDomElement"),AdfDhtmlMenuPeer.superclass.ReplaceDomElement.call(this,a,b)):(this.getDomElement().appendChild(c),AdfAgent.AGENT.elementsAdded(c),this._setLazyState("contentLoaded"),this._hideFetchingDataPopup(),
this.show(this._lazyFetchPopupHints,this._lazyFetchFocusOnFirstElement))}};AdfDhtmlMenuPeer.prototype.PopupClosed=function(a,b,c){c=this.getDomElement();AdfMenuUtils.dismiss(c,!0,!1);b.style.display="none";AdfDhtmlMenuPeer.superclass.PopupClosed.call(this,a,b);c.appendChild(b);this.isContextMenu()&&(a=a.getParent(),AdfDhtmlPopupPeer.__handlePopupCanceled(a,b),a.getPeer().PopupClosed(a,null))};
AdfDhtmlMenuPeer.prototype.HandleComponentMouseOut=function(a){AdfDhtmlMenuPeer.OldMousePosition=AdfDhtmlMenuPeer.CurrentMousePosition;AdfMenuUtils.unhighlightRootMenuItem();this._isSubMenu()&&!this._isMenuVisible()&&(AdfDhtmlMenuPeer._popupPeerWaitingForShow==this&&AdfDhtmlMenuPeer.cancelShowing(),a=this.getDomElement(),AdfDomUtils.removeCSSClassName(a,AdfMenuUtils.HIGHLIGHTED_STYLE_CLASS),AdfDomUtils.removeCSSClassName(a,AdfMenuUtils.DEPRESSED_STYLE_CLASS))};
AdfDhtmlMenuPeer.prototype.HandleComponentKeyUp=function(a){if(!a.isCanceled()&&!this._isDisabled()){var b=this.getDomElement(),c=a.getKeyCode(),d=this._isSubMenu(),e=this.getComponent(),f=a.getSource();AdfMenuUtils.SubmenuFocusFromMouse=!1;switch(c){case AdfKeyStroke.HOME_KEY:f!=e&&(e=AdfFocusUtils.getFirstFocusableDescendant(this._getMenuElement()),this._updateActiveDescendant(e),AdfFocusUtils.focusElement(e),a.cancel());return;case AdfKeyStroke.END_KEY:f!=e&&(e=AdfFocusUtils.getLastFocusableDescendant(this._getMenuElement()),
this._updateActiveDescendant(e),AdfFocusUtils.focusElement(e),a.cancel());return;case AdfKeyStroke.ENTER_KEY:this._enterKeyDown&&(AdfDomUtils.addCSSClassName(b,AdfMenuUtils.DEPRESSED_STYLE_CLASS),this.show(null,!0));this._enterKeyDown=!1;a.cancel();return;case AdfKeyStroke.SPACE_KEY:this._spaceKeyDown&&(AdfDomUtils.addCSSClassName(b,AdfMenuUtils.DEPRESSED_STYLE_CLASS),this.show(null,!0));this._spaceKeyDown=!1;a.cancel();return;case AdfKeyStroke.ESC_KEY:this.isDetached()?(this._closeDetachedMenu(),
a.cancel()):d?b!=AdfPage.PAGE.getActiveDomElement()&&(this.focus(e),this.close(!0,!0),a.cancel()):this.isContextMenu()?(AdfMenuUtils.closeAllMenus(),b.blur(),this.focus(e),e=e.getParent(),e.getPeer().hide(e),a.cancel()):AdfMenuUtils.closeAllMenus(!0);return}b=this._isMenuVisible();c=this.isRootMenu();e=a.getSource()==e;if(b&&c||!e)e=this._scrollContentElement||this._getMenuElement(),AdfDhtmlMenuPeer._handleMenuItemAccessKeys(e,a)}};
AdfDhtmlMenuPeer.prototype.HandleComponentKeyDown=function(a){if(!a.isCanceled()&&!this._isDisabled()){var b=a.getKeyCode(),c=AdfAgent.AGENT;b==AdfKeyStroke.ENTER_KEY?(this._enterKeyDown=!0,a.cancel(),a.stopBubbling()):b==AdfKeyStroke.SPACE_KEY?(this._spaceKeyDown=!0,a.cancel(),a.stopBubbling()):c.getPreferredKeyEventForRepetition()==AdfUIInputEvent.KEY_DOWN_EVENT_TYPE&&this._handleArrowKeys(b,a)}};
AdfDhtmlMenuPeer.prototype.HandleComponentKeyPress=function(a){if(!a.isCanceled()&&!this._isDisabled()&&AdfAgent.AGENT.getPreferredKeyEventForRepetition()==AdfUIInputEvent.KEY_PRESS_EVENT_TYPE){var b=a.getKeyCode();this._handleArrowKeys(b,a)}};
AdfDhtmlMenuPeer.prototype.HandleComponentFocus=function(a){var b=a.getSource(),c=this.getComponent();b==c?(b=this.getDomElement(),this._isSubMenu()?AdfDomUtils.addCSSClassName(b,AdfMenuUtils.HIGHLIGHTED_STYLE_CLASS):AdfMenuUtils.isMenuBarAutoOpenMode()?(AdfMenuUtils.dismiss(b,!0),AdfDomUtils.addCSSClassName(b,AdfMenuUtils.DEPRESSED_STYLE_CLASS),this.show(null,!1)):AdfMenuUtils.highlightRootMenuItem(b)):b.getParent()==c&&(b=b.getClientId(),b=AdfAgent.AGENT.getElementById(b),(b=AdfFocusUtils.getFirstFocusableDescendant(b))&&
b!=this._activeDescendant&&this._updateActiveDescendant(b));a.cancel()};
AdfDhtmlMenuPeer.prototype.HandleComponentMouseOver=function(a){this._cancelHiding();var b=a.getNativeEvent();AdfDhtmlMenuPeer.CurrentMousePosition=AdfAgent.AGENT.getMousePosition(b);AdfMenuUtils.SubmenuFocusFromMouse=this._isSubMenu();if(!a.isCanceled()&&!this._isDisabled()){var c=AdfAgent.AGENT,d=this.getDomElement();c.isEventInElement(b,d)&&(a.cancel(),a.stopBubbling(),c.eatEvent(b),this.isContextMenu()||(a=this.getComponent(),this._isSubMenu()&&(AdfDomUtils.addCSSClassName(d,AdfMenuUtils.HIGHLIGHTED_STYLE_CLASS),
AdfMenuUtils.dismiss(d,!1)),this._isSubMenu()||this._isMenuVisible()?AdfFocusUtils.containsFocus(d)&&this._isSubMenu()?this._handleComponentFocusSubMenu():this.focus(a):AdfMenuUtils.areMenusOpened()?this.focus(a):(b=(b=AdfPage.PAGE.getActiveDomElement())?AdfDomUtils.isAncestor(d.parentNode,b):!1,AdfMenuUtils.highlightRootMenuItem(d),b&&this.focus(a))))}};
AdfDhtmlMenuPeer.prototype.HandleComponentMouseDown=function(a){var b=this.getComponent();if(!this._isDisabled()&&a.isLeftButtonPressed()&&b==a.getSource()){var b=AdfAgent.AGENT,c=a.getNativeEvent(),d=this.getDomElement(),e=this._scrollUpElement&&b.isEventInElement(c,this._scrollUpElement);a=this._scrollDownElement&&b.isEventInElement(c,this._scrollDownElement);e||a?(b.getPlatform()==AdfAgent.IE_PLATFORM&&(c=e?this._scrollUpElement:this._scrollDownElement,c!=AdfPage.PAGE.getActiveDomElement()&&(c.tabIndex=
0,c.focus(),c.tabIndex=-1)),b.getCapabilities()[AdfAgent.CAP_TOUCH_SCREEN]!=AdfAgent.CAP_TOUCH_SCREEN_NONE?this._startScroll(a,!0):this._startScroll(a)):b.isEventInElement(c,d)&&(this.isRootMenu()&&(AdfMenuUtils.SubmenuFocusFromMouse=!1),b.eatEvent(c),AdfDomUtils.addCSSClassName(d,AdfMenuUtils.DEPRESSED_STYLE_CLASS),this.isContextMenu()||(AdfMenuUtils.areMenusOpened()&&this.isRootMenu()?this.close(!0,!0):this.show(null,b.isTouchFirstDevice())))}};
AdfDhtmlMenuPeer.prototype.HandleComponentMouseUp=function(a){var b=AdfAgent.AGENT,c=!1;b.getPlatform()==AdfAgent.IE_PLATFORM&&9<=b.getVersion()?(c=a.getNativeEvent(),c=b.isLeftButton(c)):c=a.isLeftButtonPressed();!this._isDisabled()&&c&&(c=a.getNativeEvent(),this._handleElement&&AdfDomUtils.removeCSSClassName(this._handleElement,AdfMenuUtils.DEPRESSED_STYLE_CLASS),a=this._scrollUpElement&&b.isEventInElement(c,this._scrollUpElement),b=this._scrollDownElement&&b.isEventInElement(c,this._scrollDownElement),
a||b)&&(this._endScroll(),this.updateScrollIconsState())};AdfDhtmlMenuPeer.prototype.HandleComponentBlur=function(a){a=this.getDomElement();var b=!this._isSubMenu(),c=this._isSubMenu()&&!this._isMenuVisible(),d=this._isSubMenu()&&this._isMenuVisible()&&this.isDetached();(b||c||d)&&AdfDomUtils.removeCSSClassName(a,AdfMenuUtils.HIGHLIGHTED_STYLE_CLASS);!this.isDetached()&&this._isMenuVisible()||AdfDomUtils.removeCSSClassName(a,AdfMenuUtils.DEPRESSED_STYLE_CLASS)};
AdfDhtmlMenuPeer.prototype.ComponentRemoved=function(a){var b=a.getClientId();AdfMenuUtils.isMenuOpen(b)?this.hidePopup():this.isDetached()&&this._closeDetachedMenu();if(this._isDetachable()){var c=AdfAgent.AGENT,d=this._closeDetachedMenuCallback;d&&c.removeBubbleEventListener(this._closeElement,"click",d);delete this._closeElement;delete this._closeDetachedMenuCallback;(d=this._stopCallback)&&c.removeBubbleEventListener(this._handleElement,"mousedown",d);delete this._handleElement;delete this._stopCallback}this._isSubMenu()||
AdfDhtmlMenuPeer._removeBarMenu(b);this._areScrollButtonsDisplayed&&(this._scrollBoxElement.removeEventListener("wheel",this._mouseWheelHandle),this._swipeMgr.release(),this._swipeMgr=null);delete this._menuElement;delete this._scrollUpElement;delete this._scrollDownElement;delete this._scrollUpBackgroundElement;delete this._scrollDownBackgroundElement;delete this._scrollBoxElement;delete this._scrollContentElement;AdfDhtmlMenuPeer.superclass.ComponentRemoved.call(this,a)};
AdfDhtmlMenuPeer.prototype.ComponentDisabledChanged=function(a,b,c,d){AdfMenuUtils.menuItemDisabledChanged(a,b,c,this._getMenuElement())};AdfDhtmlMenuPeer.prototype.ComponentVisibleChanged=function(a,b,c,d){AdfDhtmlMenuPeer.superclass.ComponentVisibleChanged.call(this,a,b,c,d);AdfMenuUtils.menuItemVisibleChanged(a,b,c,this._getMenuElement())};
AdfDhtmlMenuPeer.prototype.ComponentTextChanged=function(a,b,c,d){return null!=d&&(b=AdfDomUtils.getFirstDescendentElement(b,"A"))?AdfDomUtils.handleTextChangeWithAccessKey(a,b,c):!1};AdfDhtmlMenuPeer.prototype.GetInlineEditor=function(a){return AdfDhtmlSimpleTextEditor.getAnchorInlineEditor()};AdfDhtmlMenuPeer.prototype.setVisibleItems=function(a){this._maxDisplayItems=a};
AdfDhtmlMenuPeer._redetachMenu=function(){var a=AdfDhtmlMenuPeer._reattachedMenuId;if(null!=a){if((a=AdfPage.PAGE.findComponent(a))&&(a=a.getPeer())&&a instanceof AdfDhtmlMenuPeer&&a._detachableWindow){var b=a._detachableWindow.getElement();b.style.left=a._detachedMenuLeft;b.style.top=a._detachedMenuTop;a._makeDetached()}AdfDhtmlMenuPeer._reattachedMenuId=null}};
AdfDhtmlMenuPeer._focusNextDetachedMenuKeyHandler=function(){if(!AdfCollections.isEmpty(AdfDhtmlMenuPeer._sDetachedMenus)){var a,b=AdfDhtmlMenuPeer._lastSelectedDetachableMenuId;null==b?a=AdfDhtmlMenuPeer._sDetachedMenus[0]:(a=AdfDhtmlMenuPeer._sDetachedMenus.length,1==a?a=AdfDhtmlMenuPeer._sDetachedMenus[0]:(b=AdfCollections.indexOf(AdfDhtmlMenuPeer._sDetachedMenus,b),a=b>=a-1?AdfDhtmlMenuPeer._sDetachedMenus[0]:AdfDhtmlMenuPeer._sDetachedMenus[b+1]));if(b=AdfPage.PAGE.findComponent(a)){var c=b.getPeer();
c.bind(b);null!=c._activeDescendant&&AdfFocusUtils.isFocusableDescendant(c._activeDescendant)||c.resetActiveDescendant();AdfFocusUtils.focusElement(c._activeDescendant);AdfDhtmlMenuPeer._lastSelectedDetachableMenuId=a}else AdfDhtmlMenuPeer._removeFromDetachedMenus(a),AdfDhtmlMenuPeer._focusNextDetachedMenuKeyHandler()}};
AdfDhtmlMenuPeer._addToDetachedMenus=function(a){var b=AdfAgent.AGENT;if(AdfCollections.isEmpty(AdfDhtmlMenuPeer._sDetachedMenus)){if(b.getPlatform()==AdfAgent.GECKO_PLATFORM){var c=AdfPage.PAGE.getDomDocument();b.addBubbleEventListener(c,"keypress",AdfDhtmlMenuPeer._cancelKeyPress)}AdfPage.PAGE.registerKeyStroke(AdfDhtmlMenuPeer._focusDetachedMenuKeyStroke,AdfDhtmlMenuPeer._focusNextDetachedMenuKeyHandler)}0>AdfCollections.indexOf(AdfDhtmlMenuPeer._sDetachedMenus,a)&&(AdfDhtmlMenuPeer._lastSelectedDetachableMenuId=
a,AdfDhtmlMenuPeer._sDetachedMenus.push(a))};
AdfDhtmlMenuPeer._removeFromDetachedMenus=function(a){AdfCollections.removeArrayValue(AdfDhtmlMenuPeer._sDetachedMenus,a);var b=AdfCollections.isEmpty(AdfDhtmlMenuPeer._sDetachedMenus);if(b||a==AdfDhtmlMenuPeer._lastSelectedDetachableMenuId)AdfDhtmlMenuPeer._lastSelectedDetachableMenuId=null;b&&(AdfPage.PAGE.unregisterKeyStroke(AdfDhtmlMenuPeer._focusDetachedMenuKeyStroke),a=AdfAgent.AGENT,a.getPlatform()==AdfAgent.GECKO_PLATFORM&&(b=AdfPage.PAGE.getDomDocument(),a.removeBubbleEventListener(b,"keypress",
AdfDhtmlMenuPeer._cancelKeyPress)))};AdfDhtmlMenuPeer._cancelKeyPress=function(a){var b=AdfAgent.AGENT.getKeyCode(a);a.ctrlKey&&a.shiftKey&&b==AdfKeyStroke.W_KEY&&AdfAgent.AGENT.eatEvent(a)};AdfDhtmlMenuPeer._menuBarKeyHandler=function(a){AdfDhtmlMenuPeer._focusMenuBar()};AdfDhtmlMenuPeer._addBarMenu=function(a){var b=AdfDhtmlMenuPeer._sBarMenus;0==b.length&&AdfPage.PAGE.registerKeyStroke(AdfDhtmlMenuPeer._menuBarKeyStroke,AdfDhtmlMenuPeer._menuBarKeyHandler);b.push(a)};
AdfDhtmlMenuPeer._removeBarMenu=function(a){var b=AdfDhtmlMenuPeer._sBarMenus;AdfCollections.removeArrayValue(b,a);0==b.length&&AdfPage.PAGE.unregisterKeyStroke(AdfDhtmlMenuPeer._menuBarKeyStroke)};AdfDhtmlMenuPeer._focusMenuBar=function(){var a=AdfDhtmlMenuPeer._sBarMenus;AdfAssert.assert(1<a.length);var a=AdfPage.PAGE.findComponent(a[0]),b=a.getParent();AdfAssert.assert(!(b instanceof AdfRichMenu));a=a.getPeer()._getParentId();a=AdfAgent.AGENT.getElementById(a);AdfFocusUtils.focusFirstTabStop(a)};
AdfDhtmlMenuPeer._handleMenuItemAccessKeys=function(a,b){var c=b.getKeyStroke(),d=c.getModifiers();if(!(d&AdfKeyStroke.CTRL_MASK||d&AdfKeyStroke.ALT_MASK||d&AdfKeyStroke.META_MASK)){d&AdfKeyStroke.SHIFT_MASK&&(d>>=AdfKeyStroke.SHIFT_MASK,c=AdfKeyStroke.getKeyStroke(c.getKeyCode(),d));for(var c=c.toMarshalledString().toUpperCase(),d=a.getElementsByTagName("tr"),e=d.length,f=0;f<e;f++){var g=d[f];if(g&&1==g.nodeType){var h=g.getAttribute("accessKey");if(h&&c==h.toUpperCase()){AdfFocusUtils.focusElement(g);
b.cancel();break}}}}};
AdfDhtmlMenuPeer.prototype._handleArrowKeys=function(a,b){var c=b.getNativeEvent();if(c.ctrlKey)this._handleCtrlArrowKeys(a,b);else if(!(c.altKey||c.shiftKey||c.metaKey)&&b.getSource()!=this.getComponent())switch(c=b.getSource().getPeer().getDomElement(),a){case AdfKeyStroke.ARROWUP_KEY:this._focusPreviousMenuItem(c);b.cancel();break;case AdfKeyStroke.ARROWDOWN_KEY:this._focusNextMenuItem(c);b.cancel();break;case AdfKeyStroke.ARROWLEFT_KEY:this._handleMenuItemLeftArrowKey(b);break;case AdfKeyStroke.ARROWRIGHT_KEY:this._handleMenuItemRightArrowKey(b)}};
AdfDhtmlMenuPeer.prototype._handleCtrlArrowKeys=function(a,b){if(this.isDetached()||this._detachableWindow&&this._isMenuVisible()){var c=AdfAgent.AGENT.getPlatform()==AdfAgent.IE_PLATFORM?187==a:61==a;if(b.getNativeEvent().altKey&&c)this._moveDetachable(0,0),b.cancel();else{c=!0;switch(a){case AdfKeyStroke.ARROWUP_KEY:this._moveDetachable(0,-20);break;case AdfKeyStroke.ARROWDOWN_KEY:this._moveDetachable(0,20);break;case AdfKeyStroke.ARROWLEFT_KEY:this._moveDetachable(-20,0);break;case AdfKeyStroke.ARROWRIGHT_KEY:this._moveDetachable(20,
0);break;default:c=!1}c&&b.cancel()}}};AdfDhtmlMenuPeer.prototype._handleMenuItemLeftArrowKey=function(a){var b=this.getComponent();this.isRootMenu()?(this.focus(b),this.close(!0,!0),AdfMenuUtils.MenuBarAutoOpenMode=!1):this.isDetached()||this.isContextMenu()||(this.focus(b),this.close(!0,!0));a.cancel()};
AdfDhtmlMenuPeer.prototype._handleMenuItemRightArrowKey=function(a){var b=a.getSource();b instanceof AdfRichMenu?(b.getPeer().show(null,!0),a.cancel()):this.isDetached()||this.isContextMenu()?a.cancel():this.isRootMenu()&&(b=this.getComponent(),this.focus(b),this.close(!0,!0),AdfLogger.LOGGER.finest("menuBar auto open mode, set to OFF due to right arrow key pressed on root menu item"),AdfMenuUtils.setMenuBarAutoOpenMode(!1),a.cancel())};
AdfDhtmlMenuPeer.prototype._focusNextMenuItem=function(a){AdfAssert.assertDomElement(this._activeDescendant);AdfAssert.assert(a==this._activeDescendant);this._activeDescendant||(AdfLogger.LOGGER.warning("Menu has lost its assigned activeDescendant!"),this.resetActiveDescendant());a=AdfFocusUtils.focusNextActiveDescendant(this._getMenuElement(),a,!0);AdfAssert.assertDomElement(a);this._activeDescendant=a;this.updateScrollIconsState()};
AdfDhtmlMenuPeer.prototype._focusPreviousMenuItem=function(a){AdfAssert.assertDomElement(this._activeDescendant);AdfAssert.assert(a==this._activeDescendant);this._activeDescendant||(AdfLogger.LOGGER.warning("Menu has lost its assigned activeDescendant!"),this.resetActiveDescendant());a=AdfFocusUtils.focusPreviousActiveDescendant(this._getMenuElement(),a,!0);AdfAssert.assertDomElement(a);this._activeDescendant=a;this.updateScrollIconsState()};
AdfDhtmlMenuPeer.prototype._onHandleClick=function(a){AdfAgent.AGENT.eatEvent(a);AdfDomUtils.addCSSClassName(this._handleElement,AdfMenuUtils.DEPRESSED_STYLE_CLASS)};
AdfDhtmlMenuPeer.prototype._initElements=function(a,b,c){a=AdfAgent.AGENT;this._isDetachable()&&(c=AdfRichUIPeer.CreateSubId(b,"close"),this._closeElement=a.getElementById(c),this._closeDetachedMenuCallback=this.createCallback(this._closeDetachedMenu),a.addBubbleEventListener(this._closeElement,"click",this._closeDetachedMenuCallback),c=AdfRichUIPeer.CreateSubId(b,"handle"),this._handleElement=a.getElementById(c),this._stopCallback=this.createCallback(this._onHandleClick),a.addBubbleEventListener(this._handleElement,
"mousedown",this._stopCallback));c=AdfRichUIPeer.CreateSubId(b,"ScrollContent");this._scrollContentElement=a.getElementById(c);var d=this._scrollContentElement.rows;if(d.length<this._maxDisplayItems)this._areScrollButtonsDisplayed=!1;else{c=[];for(i=0;i<d.length;i++){var e=d[i];"none"!=e.style.display&&c.push(e)}if(this._areScrollButtonsDisplayed=c.length>this._maxDisplayItems)d=AdfRichUIPeer.CreateSubId(b,"ScrollUp"),this._scrollUpElement=a.getElementById(d),this._scrollUpElement.style.display="block",
d=AdfRichUIPeer.CreateSubId(b,"sUpBg"),this._scrollUpBackgroundElement=a.getElementById(d),d=AdfRichUIPeer.CreateSubId(b,"ScrollDown"),this._scrollDownElement=a.getElementById(d),this._scrollDownElement.style.display="block",d=AdfRichUIPeer.CreateSubId(b,"sDwnBg"),this._scrollDownBackgroundElement=a.getElementById(d),b=AdfRichUIPeer.CreateSubId(b,"ScrollBox"),this._scrollBoxElement=a.getElementById(b),this._scrollBoxElement.style.height=c[this._maxDisplayItems].offsetTop-2-c[0].offsetTop+"px",this._mouseWheelHandle=
this.createCallback(this._mouseWheel),this._scrollBoxElement.addEventListener("wheel",this._mouseWheelHandle),b={},b[AdfSwipeSupport.PANNING_CALLBACK]=this.createCallback(this._handlePanning),a={},a[AdfSwipeSupport.MODE]=AdfSwipeSupport.MODE_VERTICAL,this._swipeMgr=new AdfSwipeSupport(this._scrollBoxElement,b,a)}};
AdfDhtmlMenuPeer.prototype._createMenuPopupHints=function(a,b){var c={},d=this.getDomElement(),e=this.getComponent();c[AdfDhtmlPopupWindow.HINT_TYPE]=AdfDhtmlPopupWindow.HINT_TYPE_MENU;c[AdfDhtmlPopupWindow.HINT_AUTODISMISS]=AdfDhtmlPopupWindow.HINT_AUTODISMISS_MENU;c[AdfDhtmlPopupWindow.HINT_ALIGN_ELEMENT]=d;c[AdfDhtmlPopupWindow.HINT_FOCUS]=b?!0:!1;c[AdfDhtmlPopupWindow.HINT_TITLE]=e.getText();c[AdfDhtmlPopupWindow.HINT_ANIMATE]=AdfRichPopup.ANIMATE_DEFAULT;c[AdfDhtmlPopupWindow.HINT_CLOSE_ON_ESCAPE]=
null!=this._activeDescendant?!1:!0;c[AdfDhtmlPopupWindow.HINT_CLOSE_HANDLER]=this.createCallback(this._clearHighlight);if(null==a||null==a[AdfDhtmlPopupWindow.HINT_MOUSEPOSITION])this._isSubMenu()||AdfMenuUtils.isInOverflow(d)?c[AdfRichPopup.HINT_ALIGN]=AdfRichPopup.ALIGN_END_BEFORE:c[AdfRichPopup.HINT_ALIGN]=AdfRichPopup.ALIGN_AFTER_START;AdfCollections.copyInto(c,a);return c};
AdfDhtmlMenuPeer.prototype._showFetchingDataPopup=function(){var a=AdfAgent.AGENT,b=this.getComponent(),c=this.getDomElement().getAttribute("id"),c=AdfRichUIPeer.CreateSubId(c,"lazy-fetch-message"),a=a.getElementById(c),a=AdfDomUtils.getFirstChildElement(a),d=this._createMenuPopupHints(null,!1);d[AdfDhtmlPopupWindow.HINT_TYPE]=AdfDhtmlPopupWindow.HINT_TYPE_INLINESELECTOR;AdfDomUtils.setVisible(a,!0);AdfDhtmlMenuPeer.superclass.showPopup.call(this,b,a,d,c)};
AdfDhtmlMenuPeer.prototype._hideFetchingDataPopup=function(){var a=this.getComponent(),b=this.getDomElement().getAttribute("id"),b=AdfRichUIPeer.CreateSubId(b,"lazy-fetch-message");AdfDhtmlMenuPeer.superclass.hidePopup.call(this,a,b)};
AdfDhtmlMenuPeer.prototype._reattachMenu=function(){if(this.isDetached()){var a=this._calculateReattachPosition(),b=this.getComponent().getClientId();AdfDhtmlMenuPeer._reattachedMenuId=b;AdfDomUtils.removeCSSClassName(this._getMenuElement(),AdfMenuUtils.DETACHED_STYLE_CLASS);var c=this._getMenuPopup();c&&c.autoSize();AdfMenuUtils.addOpenMenu(b);AdfDhtmlMenuPeer._removeFromDetachedMenus(b);this._snapDetachedMenu(a);this._isDetached=!1}};
AdfDhtmlMenuPeer.prototype._calculateReattachPosition=function(){var a=AdfPage.PAGE.getPositionManager(),b=this.getDomElement(),c=this._getMenuElement(),d=AdfRichPopup.ALIGN_END_BEFORE,e=c.clientHeight-4,c=c.clientWidth+AdfDhtmlShadowDecorator.getShadowSize();return a.calculatePlacementPosition(e,c,d,b,null)};
AdfDhtmlMenuPeer.prototype._contains=function(a){var b=this.getDomElement(),b=AdfDomUtils.isAncestorOrSelf(b,a);if("noContent"==this._getLazyState())return b;a=AdfDomUtils.isAncestor(this._getMenuElement(),a);return b||a};AdfDhtmlMenuPeer.prototype._getParentId=function(){if(!this._parentId){var a=this.getDomElement().parentNode;do var b=a.getAttribute("id"),a=a.parentNode;while(!b&&a);b&&(this._parentId=b)}return this._parentId};
AdfDhtmlMenuPeer.prototype._getDepth=function(){if(!this._depth){var a=this.getDomElement();this._depth=parseInt(a.getAttribute(AdfMenuUtils.MENU_DEPTH_KEY))}return this._depth};AdfDhtmlMenuPeer.prototype._isSubMenu=function(){return 1<this._getDepth()};AdfDhtmlMenuPeer.prototype._isDisabled=function(){var a=this.getDomElement();return a.disabled||AdfDomUtils.containsCSSClassName(a,AdfRichUIPeer.DISABLED_STYLECLASS)};AdfDhtmlMenuPeer.prototype._isDetachable=function(){return this.getComponent().getDetachable()};
AdfDhtmlMenuPeer.prototype._handleComponentFocusRootMenu=function(){var a=AdfMenuUtils.areMenusOpened(),b=AdfMenuUtils.GetLastOpenedRootMenuId();if(a&&b&&(b=AdfPage.PAGE.findComponent(b).getPeer()._getParentId(),this._getParentId()!=b))return;b=this.getDomElement();AdfPage.PAGE.setLastFocusedElement(b);a?(AdfMenuUtils.dismiss(b,!0),AdfDomUtils.addCSSClassName(b,AdfMenuUtils.DEPRESSED_STYLE_CLASS),AdfMenuUtils.SubmenuFocusFromMouse=!1,this.show(null,!1)):AdfMenuUtils.highlightRootMenuItem(b)};
AdfDhtmlMenuPeer.prototype._handleComponentFocusSubMenu=function(){var a=this.getDomElement();AdfPage.PAGE.setLastFocusedElement(a);AdfDomUtils.addCSSClassName(a,AdfMenuUtils.HIGHLIGHTED_STYLE_CLASS);var b=AdfMenuUtils.SubmenuFocusFromMouse;AdfMenuUtils.dismiss(a,!b);b&&this._delayShow()};
AdfDhtmlMenuPeer.prototype._handleHideRequest=function(a,b){AdfDhtmlMenuPeer._redetachMenu();if(!this.isDetached()){if(this.isRootMenu()){var c=this.getDomElement();AdfDomUtils.removeCSSClassName(c,AdfMenuUtils.DEPRESSED_STYLE_CLASS);AdfDomUtils.removeCSSClassName(c,AdfMenuUtils.HIGHLIGHTED_STYLE_CLASS)}AdfDhtmlMenuPeer._popupPeerWaitingForShow&&this._contains(AdfDhtmlMenuPeer._popupPeerWaitingForShow.getDomElement())&&AdfDhtmlMenuPeer.cancelShowing();AdfMenuUtils.removeOpenMenu(b)}};
AdfDhtmlMenuPeer.prototype._createDetachableWindow=function(){this._isMenuVisible()&&null==this._detachableWindow&&(this._detachableWindow=new AdfRepositionable(this._getMenuPopup(),this._handleElement),this._detachableWindow.setDragStartHandler(this.createCallback(this._dragStart)),this._detachableWindow.setDragEndHandler(this.createCallback(this._dragEnd)))};
AdfDhtmlMenuPeer.prototype._dragStart=function(){this._deselectElement();var a=this._getMenuPopup();null!=a&&null!=a.getShadowAnchor()&&(a=a.getShadowAnchor(),AdfDhtmlShadowDecorator.hasShadowDecorator(a)&&AdfDhtmlShadowDecorator.showShadowDecorator(a,!1));a=this.getDomElement();AdfMenuUtils.dismiss(a,!0);a=this._detachableWindow.getElement();this._detachedMenuLeft=a.style.left;this._detachedMenuTop=a.style.top};
AdfDhtmlMenuPeer.prototype._dragEnd=function(){this._makeDetached();var a=this._getMenuPopup();if(a){a.setAlignElement(null);var b={y:a.getTop(),x:a.getLeft()};a.setAlignPosition(b);a.activate()}AdfMenuUtils.closeAllMenus()};AdfDhtmlMenuPeer.prototype._delayPopupHiding=function(a){this._popupHidingHandle&&this._cancelHiding();this._popupHidingHandle=AdfPage.PAGE.getDomWindow().setTimeout(this.createCallback(this._delayPopupHidingCallback),AdfDhtmlMenuPeer._OPEN_CLOSE_DELAY-a)};
AdfDhtmlMenuPeer.prototype._delayPopupHidingCallback=function(){var a=this.getComponent();this.isPopupVisible(a,a.getClientId())&&this.hidePopup()};AdfDhtmlMenuPeer.prototype._delayShow=function(){AdfDhtmlMenuPeer.cancelShowing();AdfDhtmlMenuPeer._popupShowingHandle=AdfPage.PAGE.getDomWindow().setTimeout(this.createCallback(this._delayShowCallback),AdfDhtmlMenuPeer._OPEN_CLOSE_DELAY);AdfDhtmlMenuPeer._popupPeerWaitingForShow=this};
AdfDhtmlMenuPeer.prototype._delayShowCallback=function(){var a=this.getComponent();this.isPopupVisible(a,a.getClientId())?this._reattachMenu():(delete AdfDhtmlMenuPeer._popupPeerWaitingForShow,delete AdfDhtmlMenuPeer._popupShowingHandle,AdfMenuUtils.SubmenuFocusFromMouse=!1,this.show(null,!1))};
AdfDhtmlMenuPeer.prototype._cancelHiding=function(){if(this._popupHidingHandle){window.clearTimeout(this._popupHidingHandle);delete this._popupHidingHandle;var a=AdfDhtmlMenuPeer._popupPeerWaitingForShow;a&&a._getDepth()<=this._getDepth()&&AdfDhtmlMenuPeer.cancelShowing()}};
AdfDhtmlMenuPeer.prototype._makeDetached=function(){AdfDomUtils.removeCSSClassName(this._handleElement,AdfMenuUtils.DEPRESSED_STYLE_CLASS);var a=this._detachableWindow.getElement();this._isDetached=!0;this._detachedMenuLeft=a.style.left;this._detachedMenuTop=a.style.top;AdfDomUtils.addCSSClassName(this._getMenuElement(),AdfMenuUtils.DETACHED_STYLE_CLASS);(a=this._getMenuPopup())&&a.autoSize();a=this.getComponent().getClientId();AdfMenuUtils.removeOpenMenu(a);AdfDhtmlMenuPeer._addToDetachedMenus(a);
AdfMenuUtils.dismiss(this.getDomElement().parentNode,!0,!0);this._getMenuPopup().autoSize()};AdfDhtmlMenuPeer.prototype._deselectElement=function(){var a=this.getDomElement();AdfDomUtils.removeCSSClassName(a,AdfMenuUtils.HIGHLIGHTED_STYLE_CLASS);AdfDomUtils.removeCSSClassName(a,AdfMenuUtils.DEPRESSED_STYLE_CLASS)};
AdfDhtmlMenuPeer.prototype._closeDetachedMenu=function(a){a=this.getComponent();var b=a.getClientId();AdfDomUtils.removeCSSClassName(this._getMenuElement(),AdfMenuUtils.DETACHED_STYLE_CLASS);this._isDetached=!1;var c=this.getDomElement();AdfDomUtils.removeCSSClassName(c,AdfMenuUtils.HIGHLIGHTED_STYLE_CLASS);AdfDhtmlMenuPeer._removeFromDetachedMenus(b);this._detachableWindow&&this._detachableWindow.destroy();delete this._detachableWindow;b==AdfDhtmlMenuPeer._reattachedMenuId&&(AdfDhtmlMenuPeer._reattachedMenuId=
null);AdfDhtmlMenuPeer.superclass.hidePopup.call(this,a,b);AdfMenuUtils.closeAllMenus();AdfMenuUtils.restoreFocusToLastOpenedRootMenu()};AdfDhtmlMenuPeer.prototype._moveDetachable=function(a,b){this._dragStart();var c=this._detachableWindow.getElement();c.style.left=c.offsetLeft+a+"px";c.style.top=c.offsetTop+b+"px";this._dragEnd()};
AdfDhtmlMenuPeer.prototype._snapDetachedMenu=function(a){var b=this._detachableWindow.getElement(),c=a.y;a=a.x;AdfPage.PAGE.isAnimationEnabled()?(this._showShadow(!1),AdfDhtmlElementAnimator.animate(AdfDhtmlElementAnimator.FRAME_METHOD_SLOW_FAST_SLOW,300,[{element:b,properties:{left:a,top:c}}],null,function(a){a[0]._moveShadow(!0)},[this])):(b.style.left=a+"px",b.style.top=c+"px",this._moveShadow(!0))};
AdfDhtmlMenuPeer.prototype._getShadowAnchor=function(){var a=this._getMenuPopup();if(null!=a&&null!=a.getShadowAnchor())return a.getShadowAnchor()};AdfDhtmlMenuPeer.prototype._showShadow=function(a){var b=this._getShadowAnchor();AdfDhtmlShadowDecorator.hasShadowDecorator(b)&&AdfDhtmlShadowDecorator.showShadowDecorator(b,a)};
AdfDhtmlMenuPeer.prototype._moveShadow=function(a){var b=this._getShadowAnchor();null!=b&&AdfDhtmlShadowDecorator.hasShadowDecorator(b)&&(AdfDhtmlShadowDecorator.moveShadowDecorator(b),AdfDhtmlShadowDecorator.showShadowDecorator(b,a))};
AdfDhtmlMenuPeer.prototype._startScroll=function(a,b){this._scrollDelta=AdfDhtmlMenuPeer._SCROLL_DELTA;b&&(this._scrollDelta=AdfDhtmlMenuPeer._JUMP_SCROLL_DELTA);a||(this._scrollDelta*=-1);if(b)this._scroll();else{var c=this.createCallback(this._scroll);this._scrollTimer=setInterval(c,10)}};
AdfDhtmlMenuPeer.prototype._endScroll=function(){this._scrollTimer&&clearInterval(this._scrollTimer);this._scrollTimer=null;var a=this._scrollBoxElement.scrollTop,b=this._scrollContentElement.rows,c=b.length;if(0>this._scrollDelta)for(var d=c-1;-1<d;d--){var e=b[d];if("none"!=e.style.display&&(c=e.offsetTop,a>=c)){this._scrollBoxElement.scrollTop=c;break}}else for(var f=a+this._scrollBoxElement.offsetHeight,d=0;d<c;d++)if(e=b[d],"none"!=e.style.display&&(e=e.offsetTop+e.offsetHeight,f<=e)){this._scrollBoxElement.scrollTop=
a+(e-f);break}};AdfDhtmlMenuPeer.prototype._getMenuItemHeight=function(){if(null!=this._menuItemHeight)return this._menuItemHeight;var a=AdfDomUtils.getFirstChildElement(this._scrollContentElement),a=AdfDomUtils.getFirstChildElement(a);this._menuItemHeight=a.clientHeight;0==this._menuItemHeight&&(this._menuItemHeight=a.scrollHeight);return this._menuItemHeight};
AdfDhtmlMenuPeer.prototype._scroll=function(){this._scrollBoxElement.scrollTop+=this._scrollDelta;var a=this._scrollBoxElement.scrollTop,b=this._scrollContentElement.offsetHeight-this._scrollBoxElement.offsetHeight;(0>=a||a>=b)&&this._endScroll();this.updateScrollIconsState()};AdfDhtmlMenuPeer.prototype._getMenuElement=function(){if(null==this._menuElement){var a=this.getDomElement().getAttribute("id"),a=AdfRichUIPeer.CreateSubId(a,"menu");this._menuElement=AdfAgent.AGENT.getElementById(a)}return this._menuElement};
AdfDhtmlMenuPeer.prototype._getMenuPopup=function(){var a=this.getComponent(),b=a.getClientId();return this.getPopupWindow(a,b)};AdfDhtmlMenuPeer.prototype._isMenuVisible=function(){return this._getMenuPopup()?!0:!1};AdfDhtmlMenuPeer.prototype._clearHighlight=function(){if("contentPresent"==this._getLazyState())for(var a=(this._scrollContentElement||this._getMenuElement()).childNodes,b=a.length,c=0;c<b;c++){var d=a[c];d&&1==d.nodeType&&AdfDomUtils.removeCSSClassName(d,AdfMenuUtils.HIGHLIGHTED_STYLE_CLASS)}};
AdfDhtmlMenuPeer.prototype.isContentLoaded=function(){return null!=this._lazyState&&"contentLoaded"==this._lazyState};AdfDhtmlMenuPeer.prototype._getLazyState=function(){null==this._lazyState&&(this._lazyState=null==this._getMenuElement()?"noContent":"contentLoaded");return this._lazyState};AdfDhtmlMenuPeer.prototype._setLazyState=function(a){this._lazyState=a};
AdfDhtmlMenuPeer.prototype._updateActiveDescendant=function(a){AdfAssert.assertDomElement(a);this._activeDescendant&&this._activeDescendant.setAttribute("tabIndex","-1");a.setAttribute("tabIndex","0");this._activeDescendant=a};AdfDhtmlMenuPeer.prototype.SimulateMouseOnDescendant=function(a,b,c){AdfDhtmlMenuPeer.superclass.SimulateMouseOnDescendant.call(this,a,b,c);this.isContextMenu()||this._isMenuVisible()||this.show(null,!1)};
AdfDhtmlMenuPeer.prototype._mouseWheel=function(a){AdfAgent.AGENT.eatEvent(a);this._scrollBoxElement.scrollTop+=a.deltaY;this.updateScrollIconsState()};AdfDhtmlMenuPeer.prototype._handlePanning=function(a){a=a.deltaY;this._scrollBoxElement.scrollTop+=-1*a;this.updateScrollIconsState()};
function AdfMenuUtils(){}AdfObject.createSubclass(AdfMenuUtils);AdfMenuUtils.InitClass=function(){this.SELECTED_STYLE_CLASS="p_AFSelected";this.HIGHLIGHTED_STYLE_CLASS="p_AFHighlighted";this.DEPRESSED_STYLE_CLASS="p_AFDepressed";this.DETACHED_STYLE_CLASS="p_AFDetached";this.MENU_DEPTH_KEY="_afrDth";this.OVERFLOW_KEY="_afrOflw";this.AFR_TARGETROWCURRENCY="_afrTargetRowCurrency";this.AFR_TARGETCOMPONENTID="_afrTargetComponentId";this._sOpenedMenus=[]};
AdfMenuUtils.isOnMenuBar=function(a){return a instanceof AdfRichMenuBar?!0:(a=a.getParent())&&a instanceof AdfRichMenuBar};AdfMenuUtils.isInOverflow=function(a){return"true"==a.parentNode.getAttribute(AdfMenuUtils.OVERFLOW_KEY)};AdfMenuUtils.isInMenu=function(a){return a instanceof AdfRichMenuBar?!0:(a=a.getParent())&&a instanceof AdfRichMenu};
AdfMenuUtils.closeAllMenus=function(a){var b=this._sOpenedMenus;if(b&&0<b.length)for(var c=b.length-1;0<=c;c--){var d=AdfPage.PAGE.findComponent(b[c]);d?d.getPeer().hidePopup():delete b[c]}a&&AdfMenuUtils.restoreFocusToLastOpenedRootMenu()};AdfMenuUtils.GetLastOpenedRootMenuId=function(){return AdfMenuUtils._sLastOpenedRootMenuId};AdfMenuUtils.setLastOpenedRootMenuId=function(a){AdfMenuUtils._sLastOpenedRootMenuId=a};AdfMenuUtils.isMenuBarAutoOpenMode=function(){return AdfMenuUtils._menuBarAutoOpenMode};
AdfMenuUtils.setMenuBarAutoOpenMode=function(a){AdfLogger.LOGGER.finest("menuBar auto open mode: "+AdfMenuUtils._menuBarAutoOpenMode+" -\x3e "+a);AdfMenuUtils._menuBarAutoOpenMode=a};AdfMenuUtils.restoreFocusToLastOpenedRootMenu=function(){var a=AdfMenuUtils._sLastOpenedRootMenuId;if(a&&((a=AdfPage.PAGE.findComponent(a))&&a.getParent()&&"oracle.adf.RichCommandToolbarButton"==a.getParent().getComponentType()&&(a=a.getParent()),null!=a)){var b=a.getPeer(),c=b.getDomElement();b.focus(a);AdfMenuUtils.highlightRootMenuItem(c)}};
AdfMenuUtils.highlightRootMenuItem=function(a){var b=a.getAttribute("id"),c=AdfMenuUtils._highlightedRootMenuItemId;c&&c!=b&&AdfMenuUtils.unhighlightRootMenuItem();AdfDomUtils.addCSSClassName(a,AdfMenuUtils.HIGHLIGHTED_STYLE_CLASS);AdfMenuUtils._highlightedRootMenuItemId=b};
AdfMenuUtils.unhighlightRootMenuItem=function(){var a=AdfAgent.AGENT.getElementById(AdfMenuUtils._highlightedRootMenuItemId);a&&AdfDomUtils.removeCSSClassName(a,AdfMenuUtils.HIGHLIGHTED_STYLE_CLASS);AdfMenuUtils._highlightedRootMenuItemId=null};AdfMenuUtils.dismiss=function(a,b,c){var d=this._sOpenedMenus;if(d&&0!=d.length)for(var e=d.length-1;0<=e;e--){var f=AdfPage.PAGE.findComponent(d[e]);if(f){f=f.getPeer();if(f._contains(a))break;c?d.pop():(f._deselectElement(),b?f.hidePopup():f._delayPopupHiding(e))}else delete d[e]}};
AdfMenuUtils.isImmediate=function(a){var b=1==a,c=AdfDhtmlMenuPeer.OldMousePosition,d=AdfDhtmlMenuPeer.CurrentMousePosition;if(!b&&d&&c&&(b=d.y-c.y,c=d.x-c.x,AdfPage.PAGE.getLocaleContext().isRightToLeft()&&(c=-c),b=0>b||0>c,!b)){if(c=AdfPage.PAGE.findComponent(AdfPage.PAGE.getLastFocusedElement().id))d=c.getPeer(),c instanceof AdfRichMenu&&(b=(b=!d._isSubMenu())||d._getDepth()<a);b=b||this._sOpenedMenus.length<a}return b};AdfMenuUtils.areMenusOpened=function(){return this._sOpenedMenus&&0<this._sOpenedMenus.length};
AdfMenuUtils.isMenuOpen=function(a){return 0<=AdfCollections.indexOf(this._sOpenedMenus,a)};AdfMenuUtils.addOpenMenu=function(a){this.isMenuOpen(a)||this._sOpenedMenus.push(a)};AdfMenuUtils.removeOpenMenu=function(a){AdfCollections.removeArrayValue(this._sOpenedMenus,a)};
AdfMenuUtils.getContextMenuItemTargetAttrs=function(a){var b=null;for(a=a.getParent();null!=a&&(a instanceof AdfRichMenu||a instanceof AdfRichPopup);){var c;if(null!=(c=a[this.AFR_TARGETROWCURRENCY])){b={targetRowCurrency:c,targetComponentId:a[this.AFR_TARGETCOMPONENTID]};break}a=a.getParent()}return b};
AdfMenuUtils.setContextMenuItemTargetAttrs=function(a,b){var c=a.getPropertyKeys(),d=this.AFR_TARGETROWCURRENCY,e=this.AFR_TARGETCOMPONENTID;null==c[d]&&(c[d]=c[e]={type:"String"},AdfRichUIPeer.addSuppressedPPRAttributes(this,d,e));a.setProperty(e,null);a.setProperty(d,null);a.setProperty(e,b.targetComponentId);a.setProperty(d,b.targetRowCurrency)};
AdfMenuUtils.menuItemDisabledChanged=function(a,b,c,d){if(1==c){AdfDomUtils.addCSSClassName(b,AdfRichUIPeer.DISABLED_STYLECLASS);c=AdfMenuUtils.isInMenu(a)?b:AdfDomUtils.getFirstChildElement(b);var e=c.getAttribute("tabIndex");c.removeAttribute("tabIndex");c.setAttribute(AdfFocusUtils.DESCENDANT_FOCUSABLE,"false");c.setAttribute("aria-disabled","true");d&&d.setAttribute(AdfFocusUtils.DESCENDANT_FOCUSABLE,"false");AdfMenuUtils.isOnMenuBar(a)&&AdfDomUtils.getFirstDescendentElement(b,"a").removeAttribute("href");
e&&"0"==e&&(a=a.getParent(),b=a.getPeer(),b.bind(a),AdfAssert.assert(null!=b.resetActiveDescendant,"The menu item's parent should have a resetActiveDescendant method."),b.resetActiveDescendant())}else AdfDomUtils.removeCSSClassName(b,AdfRichUIPeer.DISABLED_STYLECLASS),c=AdfMenuUtils.isInMenu(a)?b:AdfDomUtils.getFirstChildElement(b),c.setAttribute("tabIndex","-1"),c.setAttribute(AdfFocusUtils.DESCENDANT_FOCUSABLE,"true"),c.removeAttribute("aria-disabled"),d&&d.removeAttribute(AdfFocusUtils.DESCENDANT_FOCUSABLE),
AdfMenuUtils.isOnMenuBar(a)&&AdfDomUtils.getFirstDescendentElement(b,"a").setAttribute("href","#")};
AdfMenuUtils.menuItemVisibleChanged=function(a,b,c,d){1==c?(a=AdfMenuUtils.isInMenu(a)?b:AdfDomUtils.getFirstChildElement(b),a.setAttribute("tabIndex","-1"),a.setAttribute(AdfFocusUtils.DESCENDANT_FOCUSABLE,"true"),d&&d.removeAttribute(AdfFocusUtils.DESCENDANT_FOCUSABLE)):(b=AdfMenuUtils.isInMenu(a)?b:AdfDomUtils.getFirstChildElement(b),c=b.getAttribute("tabIndex"),b.removeAttribute("tabIndex"),b.setAttribute(AdfFocusUtils.DESCENDANT_FOCUSABLE,"false"),d&&d.setAttribute(AdfFocusUtils.DESCENDANT_FOCUSABLE,
"false"),c&&"0"==c&&(d=a.getParent(),a=d.getPeer(),a.bind(d),AdfAssert.assert(null!=a.resetActiveDescendant,"The menu item's parent should have a resetActiveDescendant method."),a.resetActiveDescendant()))};AdfMenuUtils._handleMenuItemLeftArrowKey=function(a){var b=a.getPeer();this.isOnMenuBar(a)?(b.focus(a),b.close(!0,!0),a=a.getParent().getPeer().getDomElement(),b=b.getDomElement(),AdfFocusUtils.focusPreviousTabStop(b,a)):b.isDetached()||b.isContextMenu()||(b.focus(a),b.close(!0,!0))};
AdfMenuUtils._handleMenuItemRightArrowKey=function(a){if(a instanceof AdfRichMenu){var b=a.getPeer();b.isDetached()||b.isContextMenu()||(this.isOnMenuBar(a)?(b.focus(a),b.close(!0,!0),a=a.getParent().getPeer().getDomElement(),b=b.getDomElement(),AdfFocusUtils.focusNextTabStop(b,a,!0)):this._handleMenuItemRightArrowKey(a.getParent()))}};
AdfDhtmlMenuPeer._SUB_ID_MAP={scroll_up_button:"ScrollUp",scroll_down_button:"ScrollDown",popup:"menu",close_button:"close",detach_handle:"handle"};AdfDhtmlMenuPeer.prototype.GetSubIdDomElement=function(a){var b=this.getComponent(),c=this.getClass()._SUB_ID_MAP[a];if(c)return AdfSubIdUtils.getSubIdElementById(b,c);c=this.getDomElement();return AdfMenuUtils.getMenuItemSubIdDomElement(b,c,a)};
var AdfMenuSubIdUtils={getMenuItemElement:function(a,b,c){AdfAssert.assertNonEmptyString(c);if(AdfMenuUtils.isOnMenuBar(a)){if("bar-item-text"==c||"text"==c)return AdfMenuSubIdUtils._getBarItemTextElement(b);if("bar-item-icon"==c)return AdfMenuSubIdUtils._getBarItemIconElement(b)}else if(AdfMenuUtils.isInMenu(a)){if("submenu-text"==c||"text"==c)return AdfMenuSubIdUtils._getMenuItemTextElement(b);if("submenu-icon"==c)return AdfMenuSubIdUtils._getMenuItemIconElement(b)}return null},getMenuItemBestMatchSubId:function(a,
b,c){if(AdfMenuUtils.isOnMenuBar(a)){a=AdfMenuSubIdUtils._getBarItemTextElement(b);if(null!=a&&a==c)return"bar-item-text";b=AdfMenuSubIdUtils._getBarItemIconElement(b);if(null!=b&&b==c)return"bar-item-icon"}else if(AdfMenuUtils.isInMenu(a)){a=AdfMenuSubIdUtils._getMenuItemTextElement(b);if(null!=a&&a==c)return"submenu-text";b=AdfMenuSubIdUtils._getMenuItemIconElement(b);if(null!=b&&b==c)return"submenu-icon"}},_getBarItemTextElement:function(a){return AdfDomUtils.getDescendentElement(a,"A",0)},_getMenuItemTextElement:function(a){return AdfDomUtils.getDescendentElement(a,
"TD",1)},_getBarItemIconElement:function(a){return AdfDomUtils.getDescendentElement(a,"IMG",0)},_getMenuItemIconElement:function(a){return AdfDomUtils.getDescendentElement(a,"IMG",0)}};
AdfUIComponents.createComponentClass("AdfRichCommandMenuItem",{componentType:"oracle.adf.RichCommandMenuItem",propertyKeys:[{name:"iconDelivery",type:"String","default":"auto"},{name:"text",type:"String"},{name:"disabled",type:"Boolean","default":!1,secured:!0},{name:"accessKey",type:"String"},{name:"partialSubmit",type:"Boolean","default":!0},{name:"icon",type:"String"},{name:"selected",type:"Boolean","default":!1},{name:"selectedText",type:"String"},{name:"type",type:"String"},"accelerator",{name:"inlineStyle",
type:"String"},{name:"styleClass",type:"String"},{name:"shortDesc",type:"String"},{name:"unsecure",type:"Object",secured:!0},{name:"visible",type:"Boolean","default":!0},{name:"useWindow",type:"Boolean","default":!1},{name:"windowModalityType",type:"String","default":"modeless"},{name:"windowEmbedStyle",type:"String","default":"window"},{name:"windowHeight",type:"Number"},{name:"windowWidth",type:"Number"}],superclass:AdfUICommand});
AdfRichCommandMenuItem.prototype.getCurrentText=function(){return"antonym"!=this.getType()?this.getText():this.getSelected()?this.getSelectedText():this.getText()};AdfRichCommandMenuItem.prototype.GetChanges=function(){var a=AdfRichCommandMenuItem.superclass.GetChanges.call(this),b=a[AdfRichCommandMenuItem.ACCELERATOR];b&&(a[AdfRichCommandMenuItem.ACCELERATOR]=b.toMarshalledString());return a};
function AdfMenuUtils(){}AdfObject.createSubclass(AdfMenuUtils);AdfMenuUtils.InitClass=function(){this.SELECTED_STYLE_CLASS="p_AFSelected";this.HIGHLIGHTED_STYLE_CLASS="p_AFHighlighted";this.DEPRESSED_STYLE_CLASS="p_AFDepressed";this.DETACHED_STYLE_CLASS="p_AFDetached";this.MENU_DEPTH_KEY="_afrDth";this.OVERFLOW_KEY="_afrOflw";this.AFR_TARGETROWCURRENCY="_afrTargetRowCurrency";this.AFR_TARGETCOMPONENTID="_afrTargetComponentId";this._sOpenedMenus=[]};
AdfMenuUtils.isOnMenuBar=function(a){return a instanceof AdfRichMenuBar?!0:(a=a.getParent())&&a instanceof AdfRichMenuBar};AdfMenuUtils.isInOverflow=function(a){return"true"==a.parentNode.getAttribute(AdfMenuUtils.OVERFLOW_KEY)};AdfMenuUtils.isInMenu=function(a){return a instanceof AdfRichMenuBar?!0:(a=a.getParent())&&a instanceof AdfRichMenu};
AdfMenuUtils.closeAllMenus=function(a){var b=this._sOpenedMenus;if(b&&0<b.length)for(var c=b.length-1;0<=c;c--){var d=AdfPage.PAGE.findComponent(b[c]);d?d.getPeer().hidePopup():delete b[c]}a&&AdfMenuUtils.restoreFocusToLastOpenedRootMenu()};AdfMenuUtils.GetLastOpenedRootMenuId=function(){return AdfMenuUtils._sLastOpenedRootMenuId};AdfMenuUtils.setLastOpenedRootMenuId=function(a){AdfMenuUtils._sLastOpenedRootMenuId=a};AdfMenuUtils.isMenuBarAutoOpenMode=function(){return AdfMenuUtils._menuBarAutoOpenMode};
AdfMenuUtils.setMenuBarAutoOpenMode=function(a){AdfLogger.LOGGER.finest("menuBar auto open mode: "+AdfMenuUtils._menuBarAutoOpenMode+" -\x3e "+a);AdfMenuUtils._menuBarAutoOpenMode=a};AdfMenuUtils.restoreFocusToLastOpenedRootMenu=function(){var a=AdfMenuUtils._sLastOpenedRootMenuId;if(a&&((a=AdfPage.PAGE.findComponent(a))&&a.getParent()&&"oracle.adf.RichCommandToolbarButton"==a.getParent().getComponentType()&&(a=a.getParent()),null!=a)){var b=a.getPeer(),c=b.getDomElement();b.focus(a);AdfMenuUtils.highlightRootMenuItem(c)}};
AdfMenuUtils.highlightRootMenuItem=function(a){var b=a.getAttribute("id"),c=AdfMenuUtils._highlightedRootMenuItemId;c&&c!=b&&AdfMenuUtils.unhighlightRootMenuItem();AdfDomUtils.addCSSClassName(a,AdfMenuUtils.HIGHLIGHTED_STYLE_CLASS);AdfMenuUtils._highlightedRootMenuItemId=b};
AdfMenuUtils.unhighlightRootMenuItem=function(){var a=AdfAgent.AGENT.getElementById(AdfMenuUtils._highlightedRootMenuItemId);a&&AdfDomUtils.removeCSSClassName(a,AdfMenuUtils.HIGHLIGHTED_STYLE_CLASS);AdfMenuUtils._highlightedRootMenuItemId=null};AdfMenuUtils.dismiss=function(a,b,c){var d=this._sOpenedMenus;if(d&&0!=d.length)for(var e=d.length-1;0<=e;e--){var f=AdfPage.PAGE.findComponent(d[e]);if(f){f=f.getPeer();if(f._contains(a))break;c?d.pop():(f._deselectElement(),b?f.hidePopup():f._delayPopupHiding(e))}else delete d[e]}};
AdfMenuUtils.isImmediate=function(a){var b=1==a,c=AdfDhtmlMenuPeer.OldMousePosition,d=AdfDhtmlMenuPeer.CurrentMousePosition;if(!b&&d&&c&&(b=d.y-c.y,c=d.x-c.x,AdfPage.PAGE.getLocaleContext().isRightToLeft()&&(c=-c),b=0>b||0>c,!b)){if(c=AdfPage.PAGE.findComponent(AdfPage.PAGE.getLastFocusedElement().id))d=c.getPeer(),c instanceof AdfRichMenu&&(b=(b=!d._isSubMenu())||d._getDepth()<a);b=b||this._sOpenedMenus.length<a}return b};AdfMenuUtils.areMenusOpened=function(){return this._sOpenedMenus&&0<this._sOpenedMenus.length};
AdfMenuUtils.isMenuOpen=function(a){return 0<=AdfCollections.indexOf(this._sOpenedMenus,a)};AdfMenuUtils.addOpenMenu=function(a){this.isMenuOpen(a)||this._sOpenedMenus.push(a)};AdfMenuUtils.removeOpenMenu=function(a){AdfCollections.removeArrayValue(this._sOpenedMenus,a)};
AdfMenuUtils.getContextMenuItemTargetAttrs=function(a){var b=null;for(a=a.getParent();null!=a&&(a instanceof AdfRichMenu||a instanceof AdfRichPopup);){var c;if(null!=(c=a[this.AFR_TARGETROWCURRENCY])){b={targetRowCurrency:c,targetComponentId:a[this.AFR_TARGETCOMPONENTID]};break}a=a.getParent()}return b};
AdfMenuUtils.setContextMenuItemTargetAttrs=function(a,b){var c=a.getPropertyKeys(),d=this.AFR_TARGETROWCURRENCY,e=this.AFR_TARGETCOMPONENTID;null==c[d]&&(c[d]=c[e]={type:"String"},AdfRichUIPeer.addSuppressedPPRAttributes(this,d,e));a.setProperty(e,null);a.setProperty(d,null);a.setProperty(e,b.targetComponentId);a.setProperty(d,b.targetRowCurrency)};
AdfMenuUtils.menuItemDisabledChanged=function(a,b,c,d){if(1==c){AdfDomUtils.addCSSClassName(b,AdfRichUIPeer.DISABLED_STYLECLASS);c=AdfMenuUtils.isInMenu(a)?b:AdfDomUtils.getFirstChildElement(b);var e=c.getAttribute("tabIndex");c.removeAttribute("tabIndex");c.setAttribute(AdfFocusUtils.DESCENDANT_FOCUSABLE,"false");c.setAttribute("aria-disabled","true");d&&d.setAttribute(AdfFocusUtils.DESCENDANT_FOCUSABLE,"false");AdfMenuUtils.isOnMenuBar(a)&&AdfDomUtils.getFirstDescendentElement(b,"a").removeAttribute("href");
e&&"0"==e&&(a=a.getParent(),b=a.getPeer(),b.bind(a),AdfAssert.assert(null!=b.resetActiveDescendant,"The menu item's parent should have a resetActiveDescendant method."),b.resetActiveDescendant())}else AdfDomUtils.removeCSSClassName(b,AdfRichUIPeer.DISABLED_STYLECLASS),c=AdfMenuUtils.isInMenu(a)?b:AdfDomUtils.getFirstChildElement(b),c.setAttribute("tabIndex","-1"),c.setAttribute(AdfFocusUtils.DESCENDANT_FOCUSABLE,"true"),c.removeAttribute("aria-disabled"),d&&d.removeAttribute(AdfFocusUtils.DESCENDANT_FOCUSABLE),
AdfMenuUtils.isOnMenuBar(a)&&AdfDomUtils.getFirstDescendentElement(b,"a").setAttribute("href","#")};
AdfMenuUtils.menuItemVisibleChanged=function(a,b,c,d){1==c?(a=AdfMenuUtils.isInMenu(a)?b:AdfDomUtils.getFirstChildElement(b),a.setAttribute("tabIndex","-1"),a.setAttribute(AdfFocusUtils.DESCENDANT_FOCUSABLE,"true"),d&&d.removeAttribute(AdfFocusUtils.DESCENDANT_FOCUSABLE)):(b=AdfMenuUtils.isInMenu(a)?b:AdfDomUtils.getFirstChildElement(b),c=b.getAttribute("tabIndex"),b.removeAttribute("tabIndex"),b.setAttribute(AdfFocusUtils.DESCENDANT_FOCUSABLE,"false"),d&&d.setAttribute(AdfFocusUtils.DESCENDANT_FOCUSABLE,
"false"),c&&"0"==c&&(d=a.getParent(),a=d.getPeer(),a.bind(d),AdfAssert.assert(null!=a.resetActiveDescendant,"The menu item's parent should have a resetActiveDescendant method."),a.resetActiveDescendant()))};AdfMenuUtils._handleMenuItemLeftArrowKey=function(a){var b=a.getPeer();this.isOnMenuBar(a)?(b.focus(a),b.close(!0,!0),a=a.getParent().getPeer().getDomElement(),b=b.getDomElement(),AdfFocusUtils.focusPreviousTabStop(b,a)):b.isDetached()||b.isContextMenu()||(b.focus(a),b.close(!0,!0))};
AdfMenuUtils._handleMenuItemRightArrowKey=function(a){if(a instanceof AdfRichMenu){var b=a.getPeer();b.isDetached()||b.isContextMenu()||(this.isOnMenuBar(a)?(b.focus(a),b.close(!0,!0),a=a.getParent().getPeer().getDomElement(),b=b.getDomElement(),AdfFocusUtils.focusNextTabStop(b,a,!0)):this._handleMenuItemRightArrowKey(a.getParent()))}};
AdfRichUIPeer.createPeerClass(AdfRichUIPeer,"AdfDhtmlCommandMenuItemPeer");
AdfDhtmlCommandMenuItemPeer.InitSubclass=function(){AdfObject.ensureClassInitialization(AdfRichCommandMenuItem);AdfObject.ensureClassInitialization(AdfMenuUtils);AdfRichUIPeer.addComponentEventHandlers(this,AdfUIInputEvent.MOUSE_DOWN_EVENT_TYPE,AdfUIInputEvent.MOUSE_UP_EVENT_TYPE,AdfUIInputEvent.CLICK_EVENT_TYPE,AdfUIInputEvent.FOCUS_EVENT_TYPE,AdfUIInputEvent.BLUR_EVENT_TYPE,AdfUIInputEvent.KEY_UP_EVENT_TYPE,AdfUIInputEvent.KEY_DOWN_EVENT_TYPE);AdfAgent.AGENT.isTouchFirstDevice()||AdfRichUIPeer.addComponentEventHandlers(this,
AdfUIInputEvent.MOUSE_IN_EVENT_TYPE,AdfUIInputEvent.MOUSE_OUT_EVENT_TYPE);AdfRichUIPeer.addComponentPropertyChanges(this,AdfRichCommandMenuItem.DISABLED,AdfRichCommandMenuItem.SELECTED,AdfRichCommandMenuItem.VISIBLE);this._AFR_GROUPID="_afrGrp";this._BUSY="_busy"};AdfDhtmlCommandMenuItemPeer.prototype.Init=function(a){a.getParent();AdfDhtmlCommandMenuItemPeer.superclass.Init.call(this,a);this._spaceKeyDown=this._enterKeyDown=!1};
AdfDhtmlCommandMenuItemPeer.prototype.InitDomElement=function(a,b){AdfDhtmlCommandMenuItemPeer.superclass.InitDomElement.call(this,a,b);var c=a.getAccelerator();null!=c&&AdfRichUIPeer.registerKeyStroke(a,c,this._execute)};AdfDhtmlCommandMenuItemPeer.prototype.ComponentRemoved=function(a){var b=a.getAccelerator();null!=b&&AdfRichUIPeer.unregisterKeyStroke(a,b);AdfDhtmlCommandMenuItemPeer.superclass.ComponentRemoved.call(this,a)};AdfDhtmlCommandMenuItemPeer.prototype.GetAccessibleName=function(){return this.getComponent().getText()};
AdfDhtmlCommandMenuItemPeer.prototype.HandleComponentKeyUp=function(a){if(!this._isDisabled()){var b=a.getNativeEvent();if(!b.ctrlKey){var c=AdfAgent.AGENT.getKeyCode(b),b=this.getComponent(),d=b.getProperty(AdfDhtmlCommandMenuItemPeer._BUSY);switch(c){case AdfKeyStroke.ENTER_KEY:this._enterKeyDown&&!d&&this._execute();this._enterKeyDown=!1;c=!0;break;case AdfKeyStroke.SPACE_KEY:this._spaceKeyDown&&!d&&this._execute();this._spaceKeyDown=!1;c=!0;break;default:return}c&&(a.cancel(),AdfMenuUtils.SubmenuFocusFromMouse=
!1);(a=b.getParent())&&a instanceof AdfRichMenu&&a.getPeer().updateScrollIconsState()}}};AdfDhtmlCommandMenuItemPeer.prototype.HandleComponentKeyDown=function(a){if(!a.isCanceled()&&!this._isDisabled()){var b=a.getKeyCode();b==AdfKeyStroke.ENTER_KEY?(this._enterKeyDown=!0,a.cancel(),a.stopBubbling()):b==AdfKeyStroke.SPACE_KEY&&(this._spaceKeyDown=!0,a.cancel(),a.stopBubbling())}};
AdfDhtmlCommandMenuItemPeer.prototype.HandleComponentFocus=function(a){if(!this._isDisabled()){var b=this.getDomElement();this._deselectElement();AdfPage.PAGE.setLastFocusedElement(b);AdfDhtmlMenuPeer.cancelShowing();var c=parseInt(b.getAttribute(AdfMenuUtils.MENU_DEPTH_KEY)),d=this.getComponent();AdfMenuUtils.isInMenu(d)&&(c=!AdfMenuUtils.SubmenuFocusFromMouse||AdfMenuUtils.isImmediate(c),AdfMenuUtils.dismiss(b,c));AdfDomUtils.addCSSClassName(b,AdfMenuUtils.HIGHLIGHTED_STYLE_CLASS);a.cancel()}};
AdfDhtmlCommandMenuItemPeer.prototype.HandleComponentMouseDown=function(a){!this._isDisabled()&&a.isLeftButtonPressed()&&(a=this.getDomElement(),AdfDomUtils.addCSSClassName(a,AdfMenuUtils.DEPRESSED_STYLE_CLASS))};AdfDhtmlCommandMenuItemPeer.prototype.HandleComponentMouseUp=function(a){!this._isDisabled()&&a.isLeftButtonPressed()&&(a=this.getDomElement(),AdfDomUtils.removeCSSClassName(a,AdfMenuUtils.DEPRESSED_STYLE_CLASS))};
AdfDhtmlCommandMenuItemPeer.prototype.HandleComponentMouseOver=function(a){var b=a.getNativeEvent();AdfDhtmlMenuPeer.CurrentMousePosition=AdfAgent.AGENT.getMousePosition(b);if(!this._isDisabled())if(a.cancel(),a=this.getComponent(),b=this.getDomElement(),AdfMenuUtils.isInMenu(a))AdfDomUtils.addCSSClassName(b,AdfMenuUtils.HIGHLIGHTED_STYLE_CLASS),AdfFocusUtils.containsFocus(b)||this.focus(a);else if(AdfMenuUtils.areMenusOpened())this.focus(a);else{AdfMenuUtils.highlightRootMenuItem(b);var c=AdfPage.PAGE.getActiveDomElement();
c&&AdfDomUtils.isAncestor(b.parentNode,c)&&this.focus(a)}};AdfDhtmlCommandMenuItemPeer.prototype.HandleComponentMouseOut=function(a){a.cancel();AdfDhtmlMenuPeer.OldMousePosition=AdfDhtmlMenuPeer.CurrentMousePosition;AdfMenuUtils.unhighlightRootMenuItem();a=this.getComponent();var b=this.getDomElement();AdfMenuUtils.isInMenu(a)&&this._deselectElement();AdfDomUtils.removeCSSClassName(b,AdfMenuUtils.DEPRESSED_STYLE_CLASS)};AdfDhtmlCommandMenuItemPeer.prototype.HandleComponentBlur=function(a){this._deselectElement()};
AdfDhtmlCommandMenuItemPeer.prototype.HandleComponentClick=function(a){var b=this.getComponent().getProperty(AdfDhtmlCommandMenuItemPeer._BUSY);!a.isLeftButtonPressed()||this._isDisabled()||b||this._execute();a.cancel()};AdfDhtmlCommandMenuItemPeer.prototype.ComponentDisabledChanged=function(a,b,c,d){AdfMenuUtils.menuItemDisabledChanged(a,b,c)};
AdfDhtmlCommandMenuItemPeer.prototype.ComponentSelectedChanged=function(a,b,c,d){d=a.getType();"check"!=d&&"radio"!=d||(AdfMenuUtils.isInMenu(a)?b:AdfDomUtils.getFirstChildElement(b)).setAttribute("aria-checked",c?"true":"false");c?(AdfDomUtils.addCSSClassName(b,AdfMenuUtils.SELECTED_STYLE_CLASS),"radio"==a.getType()&&this._toggleRadioGroupItems()):AdfDomUtils.removeCSSClassName(b,AdfMenuUtils.SELECTED_STYLE_CLASS)};
AdfDhtmlCommandMenuItemPeer.prototype.ComponentVisibleChanged=function(a,b,c,d){AdfDhtmlCommandMenuItemPeer.superclass.ComponentVisibleChanged.call(this,a,b,c,d);AdfMenuUtils.menuItemVisibleChanged(a,b,c)};
AdfDhtmlCommandMenuItemPeer.prototype.SetBusy=function(a){var b=this.getComponent(),c=this.getDomElement(),d=AdfDomUtils.getFormElement(c);d&&(d=null!=AdfDomUtils.getMultiPartForm(d),b.getDisabled()||d||(AdfDomUtils.addOrRemoveCSSClassName(a,c,AdfRichUIPeer.DISABLED_STYLECLASS),b.setProperty(AdfDhtmlCommandMenuItemPeer._BUSY,a,!1,AdfUIComponent.PROPAGATE_NEVER)))};
AdfDhtmlCommandMenuItemPeer.prototype._execute=function(){if(!this._isDisabled()){var a=this.getComponent();AdfMenuUtils.isOnMenuBar(a)&&AdfMenuUtils.setLastOpenedRootMenuId(null);for(var b=a.getParent();b instanceof AdfRichMenu;)b=b.getParent();b instanceof AdfRichPopup?(AdfMenuUtils.closeAllMenus(!1),b.getPeer().hide(b)):AdfMenuUtils.closeAllMenus(!0);b=AdfMenuUtils.getContextMenuItemTargetAttrs(a);null!=b&&AdfMenuUtils.setContextMenuItemTargetAttrs(a,b);b=new AdfActionEvent(a);b.queue(a.getPartialSubmit());
b.isCanceled()||(b=a.getType(),"check"==b||"antonym"==b?a.setSelected(!a.getSelected()):"radio"==b&&this._toggleRadioGroupItems())}};
AdfDhtmlCommandMenuItemPeer.prototype._toggleRadioGroupItems=function(){var a=this.getComponent(),b=this.getDomElement(),c=this._getGroupId(b);if(null==c)AdfLogger.LOGGER.warning("Unexpected to have commandMenuItem without a group Id."),a.setSelected(!a.getSelected());else{for(var b=b.parentNode.childNodes,d=0;d<b.length;d++){var e=b[d],f=this._getGroupId(e);c==f&&(e=e.id)&&(e=AdfPage.PAGE.findComponent(e),e!=a&&e.getType&&"radio"==e.getType()&&e.setSelected(!1))}a.setSelected(!0)}};
AdfDhtmlCommandMenuItemPeer.prototype._getGroupId=function(a){return a.getAttribute?a.getAttribute(AdfDhtmlCommandMenuItemPeer._AFR_GROUPID):null};AdfDhtmlCommandMenuItemPeer.prototype._deselectElement=function(){var a=this.getDomElement();AdfDomUtils.removeCSSClassName(a,AdfMenuUtils.HIGHLIGHTED_STYLE_CLASS)};AdfDhtmlCommandMenuItemPeer.prototype._isDisabled=function(){var a=this.getDomElement();return a.disabled||AdfDomUtils.containsCSSClassName(a,AdfRichUIPeer.DISABLED_STYLECLASS)};
AdfDhtmlCommandMenuItemPeer.prototype.GetSubIdDomElement=function(a){var b=this.getComponent(),c=this.getDomElement();return AdfMenuUtils.getMenuItemSubIdDomElement(b,c,a)};
var AdfMenuSubIdUtils={getMenuItemElement:function(a,b,c){AdfAssert.assertNonEmptyString(c);if(AdfMenuUtils.isOnMenuBar(a)){if("bar-item-text"==c||"text"==c)return AdfMenuSubIdUtils._getBarItemTextElement(b);if("bar-item-icon"==c)return AdfMenuSubIdUtils._getBarItemIconElement(b)}else if(AdfMenuUtils.isInMenu(a)){if("submenu-text"==c||"text"==c)return AdfMenuSubIdUtils._getMenuItemTextElement(b);if("submenu-icon"==c)return AdfMenuSubIdUtils._getMenuItemIconElement(b)}return null},getMenuItemBestMatchSubId:function(a,
b,c){if(AdfMenuUtils.isOnMenuBar(a)){a=AdfMenuSubIdUtils._getBarItemTextElement(b);if(null!=a&&a==c)return"bar-item-text";b=AdfMenuSubIdUtils._getBarItemIconElement(b);if(null!=b&&b==c)return"bar-item-icon"}else if(AdfMenuUtils.isInMenu(a)){a=AdfMenuSubIdUtils._getMenuItemTextElement(b);if(null!=a&&a==c)return"submenu-text";b=AdfMenuSubIdUtils._getMenuItemIconElement(b);if(null!=b&&b==c)return"submenu-icon"}},_getBarItemTextElement:function(a){return AdfDomUtils.getDescendentElement(a,"A",0)},_getMenuItemTextElement:function(a){return AdfDomUtils.getDescendentElement(a,
"TD",1)},_getBarItemIconElement:function(a){return AdfDomUtils.getDescendentElement(a,"IMG",0)},_getMenuItemIconElement:function(a){return AdfDomUtils.getDescendentElement(a,"IMG",0)}};
AdfUIComponents.createComponentClass("AdfRichGoMenuItem",{componentType:"oracle.adf.RichGoMenuItem",propertyKeys:[{name:"inlineStyle",type:"String"},{name:"styleClass",type:"String"},{name:"shortDesc",type:"String"},{name:"unsecure",type:"Object",secured:!0},{name:"visible",type:"Boolean","default":!0},{name:"iconDelivery",type:"String","default":"auto"},"accelerator",{name:"accessKey",type:"String"},{name:"icon",type:"String"},{name:"disabled",type:"Boolean","default":!1,secured:!0},{name:"targetFrame",
type:"String"},{name:"text",type:"String"}],superclass:AdfUIGo});
AdfRichGoMenuItem.prototype.GetChanges=function(){var a=AdfRichGoMenuItem.superclass.GetChanges.call(this),b=a[AdfRichGoMenuItem.ACCELERATOR];b&&(a[AdfRichGoMenuItem.ACCELERATOR]=b.toMarshalledString());return a};
function AdfMenuUtils(){}AdfObject.createSubclass(AdfMenuUtils);AdfMenuUtils.InitClass=function(){this.SELECTED_STYLE_CLASS="p_AFSelected";this.HIGHLIGHTED_STYLE_CLASS="p_AFHighlighted";this.DEPRESSED_STYLE_CLASS="p_AFDepressed";this.DETACHED_STYLE_CLASS="p_AFDetached";this.MENU_DEPTH_KEY="_afrDth";this.OVERFLOW_KEY="_afrOflw";this.AFR_TARGETROWCURRENCY="_afrTargetRowCurrency";this.AFR_TARGETCOMPONENTID="_afrTargetComponentId";this._sOpenedMenus=[]};
AdfMenuUtils.isOnMenuBar=function(a){return a instanceof AdfRichMenuBar?!0:(a=a.getParent())&&a instanceof AdfRichMenuBar};AdfMenuUtils.isInOverflow=function(a){return"true"==a.parentNode.getAttribute(AdfMenuUtils.OVERFLOW_KEY)};AdfMenuUtils.isInMenu=function(a){return a instanceof AdfRichMenuBar?!0:(a=a.getParent())&&a instanceof AdfRichMenu};
AdfMenuUtils.closeAllMenus=function(a){var b=this._sOpenedMenus;if(b&&0<b.length)for(var c=b.length-1;0<=c;c--){var d=AdfPage.PAGE.findComponent(b[c]);d?d.getPeer().hidePopup():delete b[c]}a&&AdfMenuUtils.restoreFocusToLastOpenedRootMenu()};AdfMenuUtils.GetLastOpenedRootMenuId=function(){return AdfMenuUtils._sLastOpenedRootMenuId};AdfMenuUtils.setLastOpenedRootMenuId=function(a){AdfMenuUtils._sLastOpenedRootMenuId=a};AdfMenuUtils.isMenuBarAutoOpenMode=function(){return AdfMenuUtils._menuBarAutoOpenMode};
AdfMenuUtils.setMenuBarAutoOpenMode=function(a){AdfLogger.LOGGER.finest("menuBar auto open mode: "+AdfMenuUtils._menuBarAutoOpenMode+" -\x3e "+a);AdfMenuUtils._menuBarAutoOpenMode=a};AdfMenuUtils.restoreFocusToLastOpenedRootMenu=function(){var a=AdfMenuUtils._sLastOpenedRootMenuId;if(a&&((a=AdfPage.PAGE.findComponent(a))&&a.getParent()&&"oracle.adf.RichCommandToolbarButton"==a.getParent().getComponentType()&&(a=a.getParent()),null!=a)){var b=a.getPeer(),c=b.getDomElement();b.focus(a);AdfMenuUtils.highlightRootMenuItem(c)}};
AdfMenuUtils.highlightRootMenuItem=function(a){var b=a.getAttribute("id"),c=AdfMenuUtils._highlightedRootMenuItemId;c&&c!=b&&AdfMenuUtils.unhighlightRootMenuItem();AdfDomUtils.addCSSClassName(a,AdfMenuUtils.HIGHLIGHTED_STYLE_CLASS);AdfMenuUtils._highlightedRootMenuItemId=b};
AdfMenuUtils.unhighlightRootMenuItem=function(){var a=AdfAgent.AGENT.getElementById(AdfMenuUtils._highlightedRootMenuItemId);a&&AdfDomUtils.removeCSSClassName(a,AdfMenuUtils.HIGHLIGHTED_STYLE_CLASS);AdfMenuUtils._highlightedRootMenuItemId=null};AdfMenuUtils.dismiss=function(a,b,c){var d=this._sOpenedMenus;if(d&&0!=d.length)for(var e=d.length-1;0<=e;e--){var f=AdfPage.PAGE.findComponent(d[e]);if(f){f=f.getPeer();if(f._contains(a))break;c?d.pop():(f._deselectElement(),b?f.hidePopup():f._delayPopupHiding(e))}else delete d[e]}};
AdfMenuUtils.isImmediate=function(a){var b=1==a,c=AdfDhtmlMenuPeer.OldMousePosition,d=AdfDhtmlMenuPeer.CurrentMousePosition;if(!b&&d&&c&&(b=d.y-c.y,c=d.x-c.x,AdfPage.PAGE.getLocaleContext().isRightToLeft()&&(c=-c),b=0>b||0>c,!b)){if(c=AdfPage.PAGE.findComponent(AdfPage.PAGE.getLastFocusedElement().id))d=c.getPeer(),c instanceof AdfRichMenu&&(b=(b=!d._isSubMenu())||d._getDepth()<a);b=b||this._sOpenedMenus.length<a}return b};AdfMenuUtils.areMenusOpened=function(){return this._sOpenedMenus&&0<this._sOpenedMenus.length};
AdfMenuUtils.isMenuOpen=function(a){return 0<=AdfCollections.indexOf(this._sOpenedMenus,a)};AdfMenuUtils.addOpenMenu=function(a){this.isMenuOpen(a)||this._sOpenedMenus.push(a)};AdfMenuUtils.removeOpenMenu=function(a){AdfCollections.removeArrayValue(this._sOpenedMenus,a)};
AdfMenuUtils.getContextMenuItemTargetAttrs=function(a){var b=null;for(a=a.getParent();null!=a&&(a instanceof AdfRichMenu||a instanceof AdfRichPopup);){var c;if(null!=(c=a[this.AFR_TARGETROWCURRENCY])){b={targetRowCurrency:c,targetComponentId:a[this.AFR_TARGETCOMPONENTID]};break}a=a.getParent()}return b};
AdfMenuUtils.setContextMenuItemTargetAttrs=function(a,b){var c=a.getPropertyKeys(),d=this.AFR_TARGETROWCURRENCY,e=this.AFR_TARGETCOMPONENTID;null==c[d]&&(c[d]=c[e]={type:"String"},AdfRichUIPeer.addSuppressedPPRAttributes(this,d,e));a.setProperty(e,null);a.setProperty(d,null);a.setProperty(e,b.targetComponentId);a.setProperty(d,b.targetRowCurrency)};
AdfMenuUtils.menuItemDisabledChanged=function(a,b,c,d){if(1==c){AdfDomUtils.addCSSClassName(b,AdfRichUIPeer.DISABLED_STYLECLASS);c=AdfMenuUtils.isInMenu(a)?b:AdfDomUtils.getFirstChildElement(b);var e=c.getAttribute("tabIndex");c.removeAttribute("tabIndex");c.setAttribute(AdfFocusUtils.DESCENDANT_FOCUSABLE,"false");c.setAttribute("aria-disabled","true");d&&d.setAttribute(AdfFocusUtils.DESCENDANT_FOCUSABLE,"false");AdfMenuUtils.isOnMenuBar(a)&&AdfDomUtils.getFirstDescendentElement(b,"a").removeAttribute("href");
e&&"0"==e&&(a=a.getParent(),b=a.getPeer(),b.bind(a),AdfAssert.assert(null!=b.resetActiveDescendant,"The menu item's parent should have a resetActiveDescendant method."),b.resetActiveDescendant())}else AdfDomUtils.removeCSSClassName(b,AdfRichUIPeer.DISABLED_STYLECLASS),c=AdfMenuUtils.isInMenu(a)?b:AdfDomUtils.getFirstChildElement(b),c.setAttribute("tabIndex","-1"),c.setAttribute(AdfFocusUtils.DESCENDANT_FOCUSABLE,"true"),c.removeAttribute("aria-disabled"),d&&d.removeAttribute(AdfFocusUtils.DESCENDANT_FOCUSABLE),
AdfMenuUtils.isOnMenuBar(a)&&AdfDomUtils.getFirstDescendentElement(b,"a").setAttribute("href","#")};
AdfMenuUtils.menuItemVisibleChanged=function(a,b,c,d){1==c?(a=AdfMenuUtils.isInMenu(a)?b:AdfDomUtils.getFirstChildElement(b),a.setAttribute("tabIndex","-1"),a.setAttribute(AdfFocusUtils.DESCENDANT_FOCUSABLE,"true"),d&&d.removeAttribute(AdfFocusUtils.DESCENDANT_FOCUSABLE)):(b=AdfMenuUtils.isInMenu(a)?b:AdfDomUtils.getFirstChildElement(b),c=b.getAttribute("tabIndex"),b.removeAttribute("tabIndex"),b.setAttribute(AdfFocusUtils.DESCENDANT_FOCUSABLE,"false"),d&&d.setAttribute(AdfFocusUtils.DESCENDANT_FOCUSABLE,
"false"),c&&"0"==c&&(d=a.getParent(),a=d.getPeer(),a.bind(d),AdfAssert.assert(null!=a.resetActiveDescendant,"The menu item's parent should have a resetActiveDescendant method."),a.resetActiveDescendant()))};AdfMenuUtils._handleMenuItemLeftArrowKey=function(a){var b=a.getPeer();this.isOnMenuBar(a)?(b.focus(a),b.close(!0,!0),a=a.getParent().getPeer().getDomElement(),b=b.getDomElement(),AdfFocusUtils.focusPreviousTabStop(b,a)):b.isDetached()||b.isContextMenu()||(b.focus(a),b.close(!0,!0))};
AdfMenuUtils._handleMenuItemRightArrowKey=function(a){if(a instanceof AdfRichMenu){var b=a.getPeer();b.isDetached()||b.isContextMenu()||(this.isOnMenuBar(a)?(b.focus(a),b.close(!0,!0),a=a.getParent().getPeer().getDomElement(),b=b.getDomElement(),AdfFocusUtils.focusNextTabStop(b,a,!0)):this._handleMenuItemRightArrowKey(a.getParent()))}};
AdfRichUIPeer.createPeerClass(AdfRichUIPeer,"AdfDhtmlGoMenuItemPeer",!1);
AdfDhtmlGoMenuItemPeer.InitSubclass=function(){AdfObject.ensureClassInitialization(AdfRichGoMenuItem);AdfObject.ensureClassInitialization(AdfMenuUtils);AdfRichUIPeer.addComponentEventHandlers(this,AdfUIInputEvent.MOUSE_DOWN_EVENT_TYPE,AdfUIInputEvent.MOUSE_UP_EVENT_TYPE,AdfUIInputEvent.CLICK_EVENT_TYPE,AdfUIInputEvent.FOCUS_EVENT_TYPE,AdfUIInputEvent.BLUR_EVENT_TYPE,AdfUIInputEvent.KEY_UP_EVENT_TYPE,AdfUIInputEvent.KEY_DOWN_EVENT_TYPE);AdfAgent.AGENT.isTouchFirstDevice()||AdfRichUIPeer.addComponentEventHandlers(this,
AdfUIInputEvent.MOUSE_IN_EVENT_TYPE,AdfUIInputEvent.MOUSE_OUT_EVENT_TYPE);AdfRichUIPeer.addComponentPropertyChanges(this,AdfRichGoMenuItem.DISABLED,AdfRichGoMenuItem.VISIBLE)};AdfDhtmlGoMenuItemPeer.prototype.Init=function(a){a.getParent();AdfDhtmlGoMenuItemPeer.superclass.Init.call(this,a);this._spaceKeyDown=this._enterKeyDown=!1};
AdfDhtmlGoMenuItemPeer.prototype.InitDomElement=function(a,b){AdfDhtmlGoMenuItemPeer.superclass.InitDomElement.call(this,a,b);var c=a.getAccelerator();null!=c&&AdfRichUIPeer.registerKeyStroke(a,c,this._execute)};AdfDhtmlGoMenuItemPeer.prototype.ComponentRemoved=function(a){var b=a.getAccelerator();null!=b&&AdfRichUIPeer.unregisterKeyStroke(a,b);AdfDhtmlGoMenuItemPeer.superclass.ComponentRemoved.call(this,a)};
AdfDhtmlGoMenuItemPeer.prototype.HandleComponentKeyUp=function(a){var b=a.getNativeEvent();if(!b.ctrlKey){switch(AdfAgent.AGENT.getKeyCode(b)){case AdfKeyStroke.ENTER_KEY:this._enterKeyDown&&this._execute();this._enterKeyDown=!1;b=!0;break;case AdfKeyStroke.SPACE_KEY:this._spaceKeyDown&&this._execute();this._spaceKeyDown=!1;b=!0;break;default:return}b&&(a.cancel(),AdfMenuUtils.SubmenuFocusFromMouse=!1);(a=this.getComponent().getParent())&&a instanceof AdfRichMenu&&a.getPeer().updateScrollIconsState()}};
AdfDhtmlGoMenuItemPeer.prototype.HandleComponentKeyDown=function(a){if(!a.isCanceled()&&!this._isDisabled()){var b=a.getKeyCode();b==AdfKeyStroke.ENTER_KEY?(this._enterKeyDown=!0,a.cancel(),a.stopBubbling()):b==AdfKeyStroke.SPACE_KEY&&(this._spaceKeyDown=!0,a.cancel(),a.stopBubbling())}};
AdfDhtmlGoMenuItemPeer.prototype.HandleComponentFocus=function(a){if(!this._isDisabled()){var b=this.getDomElement();this._deselectElement();AdfPage.PAGE.setLastFocusedElement(b);AdfDhtmlMenuPeer.cancelShowing();var c=parseInt(b.getAttribute(AdfMenuUtils.MENU_DEPTH_KEY)),d=this.getComponent();AdfMenuUtils.isInMenu(d)&&(c=!AdfMenuUtils.SubmenuFocusFromMouse||AdfMenuUtils.isImmediate(c),AdfMenuUtils.dismiss(b,c));AdfDomUtils.addCSSClassName(b,AdfMenuUtils.HIGHLIGHTED_STYLE_CLASS);a.cancel()}};
AdfDhtmlGoMenuItemPeer.prototype.HandleComponentMouseDown=function(a){!this._isDisabled()&&a.isLeftButtonPressed()&&(a=this.getDomElement(),AdfDomUtils.addCSSClassName(a,AdfMenuUtils.DEPRESSED_STYLE_CLASS))};AdfDhtmlGoMenuItemPeer.prototype.HandleComponentMouseUp=function(a){!this._isDisabled()&&a.isLeftButtonPressed()&&(a=this.getDomElement(),AdfDomUtils.removeCSSClassName(a,AdfMenuUtils.DEPRESSED_STYLE_CLASS))};
AdfDhtmlGoMenuItemPeer.prototype.HandleComponentMouseOver=function(a){var b=a.getNativeEvent();AdfDhtmlMenuPeer.CurrentMousePosition=AdfAgent.AGENT.getMousePosition(b);if(!this._isDisabled())if(a.cancel(),a=this.getDomElement(),b=this.getComponent(),AdfMenuUtils.isInMenu(b))AdfDomUtils.addCSSClassName(a,AdfMenuUtils.HIGHLIGHTED_STYLE_CLASS),AdfFocusUtils.containsFocus(a)||this.focus(b);else if(AdfMenuUtils.areMenusOpened())this.focus(b);else{a=this.getDomElement();AdfMenuUtils.highlightRootMenuItem(a);
var c=AdfPage.PAGE.getActiveDomElement();c&&AdfDomUtils.isAncestor(a.parentNode,c)&&this.focus(b)}};AdfDhtmlGoMenuItemPeer.prototype.HandleComponentMouseOut=function(a){a.cancel();AdfDhtmlMenuPeer.OldMousePosition=AdfDhtmlMenuPeer.CurrentMousePosition;AdfMenuUtils.unhighlightRootMenuItem();a=this.getComponent();var b=this.getDomElement();AdfMenuUtils.isInMenu(a)&&this._deselectElement();AdfDomUtils.removeCSSClassName(b,AdfMenuUtils.DEPRESSED_STYLE_CLASS)};
AdfDhtmlGoMenuItemPeer.prototype.HandleComponentBlur=function(a){this._deselectElement()};AdfDhtmlGoMenuItemPeer.prototype.HandleComponentClick=function(a){!this._isDisabled()&&a.isLeftButtonPressed()&&this._execute();a.cancel()};AdfDhtmlGoMenuItemPeer.prototype.ComponentDisabledChanged=function(a,b,c,d){AdfMenuUtils.menuItemDisabledChanged(a,b,c)};
AdfDhtmlGoMenuItemPeer.prototype.ComponentVisibleChanged=function(a,b,c,d){AdfDhtmlGoMenuItemPeer.superclass.ComponentVisibleChanged.call(this,a,b,c,d);AdfMenuUtils.menuItemVisibleChanged(a,b,c)};
AdfDhtmlGoMenuItemPeer.prototype._execute=function(){if(!this._isDisabled()){var a=this.getComponent();AdfMenuUtils.isOnMenuBar(a)&&AdfMenuUtils.setLastOpenedRootMenuId(null);var b=AdfMenuUtils.getContextMenuItemTargetAttrs(a);null!=b&&AdfMenuUtils.setContextMenuItemTargetAttrs(a,b);var b=a.getDestination(),a=a.getTargetFrame(),c=null==b?!0:!1;null==b&&(b="#");null==a?self.location=b:window.open(b,a).focus();AdfMenuUtils.closeAllMenus(c)}};
AdfDhtmlGoMenuItemPeer.prototype._deselectElement=function(){var a=this.getDomElement();AdfDomUtils.removeCSSClassName(a,AdfMenuUtils.HIGHLIGHTED_STYLE_CLASS)};AdfDhtmlGoMenuItemPeer.prototype._isDisabled=function(){var a=this.getDomElement();return a.disabled||AdfDomUtils.containsCSSClassName(a,AdfRichUIPeer.DISABLED_STYLECLASS)};
AdfDhtmlGoMenuItemPeer.prototype.GetSubIdDomElement=function(a){var b=this.getComponent(),c=this.getDomElement();return AdfMenuUtils.getMenuItemSubIdDomElement(b,c,a)};
AdfMenuUtils.getMenuItemSubIdDomElement=function(a,b,c){AdfAssert.assertNonEmptyString(c);if(AdfMenuUtils.isOnMenuBar(a)){if("bar-item-text"==c||"text"==c)return AdfDomUtils.getDescendentElement(b,"A",0);if("bar-item-icon"==c)return AdfDomUtils.getDescendentElement(b,"IMG",0)}else if(AdfMenuUtils.isInMenu(a)){if("submenu-text"==c||"text"==c)return AdfDomUtils.getDescendentElement(b,"TD",1);if("submenu-icon"==c)return AdfDomUtils.getDescendentElement(b,"IMG",0)}return null};
var AdfMenuSubIdUtils={getMenuItemElement:function(a,b,c){AdfAssert.assertNonEmptyString(c);if(AdfMenuUtils.isOnMenuBar(a)){if("bar-item-text"==c||"text"==c)return AdfMenuSubIdUtils._getBarItemTextElement(b);if("bar-item-icon"==c)return AdfMenuSubIdUtils._getBarItemIconElement(b)}else if(AdfMenuUtils.isInMenu(a)){if("submenu-text"==c||"text"==c)return AdfMenuSubIdUtils._getMenuItemTextElement(b);if("submenu-icon"==c)return AdfMenuSubIdUtils._getMenuItemIconElement(b)}return null},getMenuItemBestMatchSubId:function(a,
b,c){if(AdfMenuUtils.isOnMenuBar(a)){a=AdfMenuSubIdUtils._getBarItemTextElement(b);if(null!=a&&a==c)return"bar-item-text";b=AdfMenuSubIdUtils._getBarItemIconElement(b);if(null!=b&&b==c)return"bar-item-icon"}else if(AdfMenuUtils.isInMenu(a)){a=AdfMenuSubIdUtils._getMenuItemTextElement(b);if(null!=a&&a==c)return"submenu-text";b=AdfMenuSubIdUtils._getMenuItemIconElement(b);if(null!=b&&b==c)return"submenu-icon"}},_getBarItemTextElement:function(a){return AdfDomUtils.getDescendentElement(a,"A",0)},_getMenuItemTextElement:function(a){return AdfDomUtils.getDescendentElement(a,
"TD",1)},_getBarItemIconElement:function(a){return AdfDomUtils.getDescendentElement(a,"IMG",0)},_getMenuItemIconElement:function(a){return AdfDomUtils.getDescendentElement(a,"IMG",0)}};