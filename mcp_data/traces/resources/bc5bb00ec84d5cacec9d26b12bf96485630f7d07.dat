function AdfListViewDataFetchEvent(a,b,c,d,e){this.Init(a,b,c,d,e)}AdfObject.createSubclass(AdfListViewDataFetchEvent,AdfComponentEvent);AdfListViewDataFetchEvent.FETCH_EVENT_TYPE="fetch";AdfListViewDataFetchEvent.prototype.Init=function(a,b,c,d,e){AdfListViewDataFetchEvent.superclass.Init.call(this,a,AdfListViewDataFetchEvent.FETCH_EVENT_TYPE);this._id=b;this._clientKey=d;this._subtype=c;this._index=e;this.setRoot(a)};
AdfListViewDataFetchEvent.prototype.AddMarshalledProperties=function(a){AdfListViewDataFetchEvent.superclass.AddMarshalledProperties.call(this,a);a.id=this._id;a.subtype=this._subtype;this._clientKey&&(a.clientKey=this._clientKey);void 0!=this._index&&(a.index=this._index)};AdfListViewDataFetchEvent.prototype.getClearMessages=function(){return!1};AdfListViewDataFetchEvent.prototype.propagatesToServer=function(){return!0};AdfListViewDataFetchEvent.prototype.isValidationNeeded=function(){return!0};
AdfListViewDataFetchEvent.MORE_SUBTYPE=0;
AdfUIComponents.createComponentClass("AdfRichListView",{componentType:"oracle.adf.RichListView",propertyKeys:[{name:"fetchSize",type:"Number","default":25},{name:"selection",type:"String","default":"none"},{name:"emptyText",type:"String"},{name:"immediate",type:"Boolean","default":!1},{name:"groupDisclosurePolicy",type:"String"},{name:"maxClientRows",type:"Number","default":500},{name:"scrollPolicy",type:"String","default":"page"},{name:"inlineStyle",type:"String"},{name:"styleClass",type:"String"},
{name:"shortDesc",type:"String"},{name:"unsecure",type:"Object",secured:!0},{name:"visible",type:"Boolean","default":!0}],superclass:AdfUIListView});
AdfRichListView.prototype.getRowIndex=function(a){return this.getPeer().getRowIndex(a)};AdfRichListView.prototype.getRowKey=function(a){return this.getPeer().getRowKey(a)};
AdfUIComponents.createComponentClass("AdfRichListItem",{componentType:"oracle.adf.RichListItem",propertyKeys:[{name:"inlineStyle",type:"String"},{name:"styleClass",type:"String"},{name:"shortDesc",type:"String"},{name:"unsecure",type:"Object",secured:!0},{name:"visible",type:"Boolean","default":!0}],superclass:AdfUIPanel});
AdfRichUIPeer.createPeerClass(AdfRichUIPeer,"AdfDhtmlListViewPeer",!1);
AdfDhtmlListViewPeer.InitSubclass=function(){AdfRichUIPeer.addComponentEventHandlers(this,AdfUIInputEvent.CLICK_EVENT_TYPE,AdfUIInputEvent.KEY_DOWN_EVENT_TYPE,AdfUIInputEvent.MOUSE_IN_EVENT_TYPE,AdfUIInputEvent.MOUSE_OUT_EVENT_TYPE);AdfRichUIPeer.addSuppressedPPRAttributes(this,"rows");AdfRichUIPeer.addComponentPropertyChanges(this,"selectedRowKeys");this.DW_SUB_ID="dataW";this._FETCH_MORE_DIV="fchmr";this._FETCH_MORE_LINK="fchmrlnk";this._ICON_STYLE_EXPANDED="af|listItem::expanded-icon-style";this._ICON_STYLE_COLLAPSED=
"af|listItem::collapsed-icon-style";this._ICON_EXPANDED="af|listItem::expanded-icon";this._ICON_COLLAPSED="af|listItem::collapsed-icon";this._EXPANDED_GROUP_KEY="af_listItem.TIP_EXPANDED_GROUP";this._COLLAPSED_GROUP_KEY="af_listItem.TIP_COLLAPSED_GROUP";this._ROW_KEY="data-afrRK";this._GROUP_HEADER_ATTR="data-afrgrpHdr";this._FETCH_INDEX_ATTR="data-afrfchIndx";this._FETCH_DELAY_TIMEOUT=300;this._INPUT_REGEXP=/^INPUT|SELECT|OPTION|BUTTON|^A\b|TEXTAREA|LABEL/;this._NEEDS_REFRESH_ATTRIBUTE="data-afrNdsRfr";
this._UNDO_FETCH_ATTRIBUTE="data-afrUndFch";this._SELECTED_CLASS="p_AFSelected";this._HIGHLIGHTED_CLASS="p_AFHighlighted";this._DROP_TARGET_CLASS="p_AFDropTarget";this._SEL_UPDATE_ALL_SELECT=0;this._SEL_UPDATE_ALL_UNSELECT=1;this._SEL_UPDATE_ALL_UPDATE=2;this._SCROLLBAR_BEHAVIOR="_afrScrollBarBehavior";this._SCROLLBAR_BEHAVIOR_AUTO_HIDE="autohiding-scrollbar"};
AdfDhtmlListViewPeer.prototype.InitDomElement=function(a,b){AdfDhtmlListViewPeer.superclass.InitDomElement.call(this,a,b);this._fetchId=0;AdfAgent.AGENT.getOS()==AdfAgent.MAC_OS?this._scrollbarBehavior=null:(this._scrollbarBehavior=a.getProperty(AdfDhtmlListViewPeer._SCROLLBAR_BEHAVIOR),this.initializeAutoHideScrolling(b));(this._scrollMode="scroll"==a.getProperty("scrollPolicy")&&!AdfPage.PAGE.isScreenReaderMode())&&b.addEventListener("scroll",function(){var a=window.AdfRichUIPeer.getFirstAncestorComponent(this),
b=a.getPeer(),e=a.getProperty("rows"),f=0,g=b._getDatabody(),g=g?g.childNodes:null;if(null!=g)for(var h=0;h<e;h++)1==g[h].nodeType&&(f+=g[h].clientHeight);window.AdfRichUIPeer.getFirstAncestorComponent(this.parentElement).getPeer().getDomElement().clientHeight+this.scrollTop>f&&(a=a.getProperty("rows")-1,b._addMore(a.toString(),a))})};AdfDhtmlListViewPeer.prototype.isDisclosureFetchPending=function(){return!1};AdfDhtmlListViewPeer.prototype.needsResizeNotify=function(a){return!0};
AdfDhtmlListViewPeer.prototype.ResizeNotify=function(a,b,c,d){if(this._initialized)a=this.getDomElement(),this.initializeAutoHideScrolling(a);else{this._initialized=!0;a=this._getDatabody();c=a.childNodes;b=0;for(d=c.length-1;0<=d;d--){var e=c[d];if("DIV"==e.tagName&&null!=e.getAttribute("data-emptyText")){this._isEmpty=!0;break}else 1==e.nodeType&&b++}c=this.getComponent();b!=c.getProperty("rows")&&c.setProperty("rows",b,!1,AdfUIComponent.PROPAGATE_NEVER);AdfAgent.AGENT.getPlatform()==AdfAgent.IE_PLATFORM&&
this._isMultipleSelect()&&(a.onselectstart=this.createCallback(this._handleDataBodySelectStart))}this._scrollMode&&this._callAddMore()};
AdfDhtmlListViewPeer.prototype._callAddMore=function(){var a=this.getDomElement(),b=this.getComponent(),c=b.getProperty("rows"),d=0,e=this._getDatabody(),e=e?e.childNodes:null;if(null!=e)for(var f=0;f<c;f++)1==e[f].nodeType&&(d+=e[f].clientHeight);window.AdfRichUIPeer.getFirstAncestorComponent(a.parentElement).getPeer().getDomElement().clientHeight+a.scrollTop>d&&(a=b.getProperty("rows")-1,this._addMore(a.toString(),a))};
AdfDhtmlListViewPeer.prototype.initializeAutoHideScrolling=function(a){var b=AdfAgent.AGENT;if(this._scrollbarBehavior==AdfDhtmlListViewPeer._SCROLLBAR_BEHAVIOR_AUTO_HIDE){this._scrollbarWidth||(this._scrollbarWidth=this._calculateScrollBarWidth(a));b=b.getComputedStyle(a);if(!this._verticalScrollPadding&&this._needsVerticalScrollbar(a)){if(AdfDhtmlListViewPeer._isRTL()){var c=AdfAgent.getCSSLengthAsInt(b.paddingLeft);a.style.paddingLeft=c+this._scrollbarWidth+"px"}else c=AdfAgent.getCSSLengthAsInt(b.paddingRight),
a.style.paddingRight=c+this._scrollbarWidth+"px";this._verticalScrollPadding=this._scrollbarWidth}!this._horizontalScrollPadding&&this._needsHorizontalScrollbar(a)&&(b=AdfAgent.getCSSLengthAsInt(b.paddingBottom),a.style.paddingBotttom=b+this._scrollbarWidth+"px",this._horizontalScrollPadding=this._scrollbarWidth)}};
AdfDhtmlListViewPeer.prototype._calculateScrollBarWidth=function(a){var b=this.getDomDocument().createElement("div");b.style.visiblity="hidden";b.style.overflow="scroll";b.style.position="absolute";a.appendChild(b);var c=b.offsetWidth-b.clientWidth;a.removeChild(b);return c};AdfDhtmlListViewPeer.prototype._needsVerticalScrollbar=function(a){return a.scrollHeight>a.offsetHeight};AdfDhtmlListViewPeer.prototype._needsHorizontalScrollbar=function(a){return a.scrollWidth>a.offsetWidth};
AdfDhtmlListViewPeer.prototype.ReplaceDomElement=function(a,b){if(0<a.id.indexOf(AdfDhtmlListViewPeer.DW_SUB_ID)){for(var c=AdfAgent.AGENT,d=this._getDatabody(),e=this.getComponent(),f=c.getIntAttribute(a,"data-fetchId",-1),g=this._pendingFetch,h=b.firstChild;h;)this._unregisterNode(h),b.removeChild(h),h=b.firstChild;(h=a.lastChild)&&h.id&&0<h.id.indexOf(AdfDhtmlListViewPeer._FETCH_MORE_DIV)?a.removeChild(h):h=null;if(void 0!=g&&this._pendingId==f){var k=this._insertAfterNode,f=this._fetchKey;this._cancelPendingFetch();
if(c.getBooleanAttribute(a,AdfDhtmlListViewPeer._NEEDS_REFRESH_ATTRIBUTE,!1)){AdfPage.PAGE.addPartialTargets(e);return}if(c.getBooleanAttribute(a,AdfDhtmlListViewPeer._UNDO_FETCH_ATTRIBUTE,!1)){AdfDhtmlListViewPeer._setCursor(d,"");this._hideStatus();return}this._handleDataCallback(a,g,k,e);if(e=c.getElementById(AdfRichUIPeer.CreateSubId(e.getClientId(),AdfDhtmlListViewPeer._FETCH_MORE_DIV)+f))h?(c.elementsAdded(e),e.parentNode.replaceChild(h,e),c.elementsAdded(h)):(c.elementsAdded(e),e.parentNode.removeChild(e))}else this._addInvalidDataBlock(b,
a,d);AdfDhtmlListViewPeer._setCursor(d,"");this._hideStatus();AdfPage.PAGE.scheduleTimer(this,this._doResizeNotifyOnFetchedChildren,k,10);this.getDomElement().focus()}else AdfDhtmlListViewPeer.superclass.ReplaceDomElement.call(this,a,b);this._scrollMode&&this._callAddMore()};
AdfDhtmlListViewPeer.prototype._doResizeNotifyOnFetchedChildren=function(a){var b=AdfPage.PAGE;for(a=a.nextSibling;a;){var c=a.id;null!=c&&(c=AdfPage.PAGE.findComponent(c),null!=c&&b.doResizeNotify(c));a=a.nextSibling}b=this.getDomElement();this.initializeAutoHideScrolling(b)};AdfDhtmlListViewPeer.prototype.DomReplaceNotify=function(a){return 0<a.id.indexOf(AdfDhtmlListViewPeer.DW_SUB_ID)?null:a};AdfDhtmlListViewPeer.prototype.ComponentGroupDisclosedRowKeysChanged=function(a,b,c,d){AdfPage.PAGE.addPartialTargets(a)};
AdfDhtmlListViewPeer.prototype._getExpandAction=function(a){var b=AdfPage.PAGE.getLookAndFeel(),c=b.getStyleClass(AdfDhtmlListViewPeer._ICON_STYLE_EXPANDED),d=a.parentNode.className;if(c==a.className||c==d)return"collapse";b=b.getStyleClass(AdfDhtmlListViewPeer._ICON_STYLE_COLLAPSED);return b==a.className||b==d?"expand":null};AdfDhtmlListViewPeer.prototype.HandleComponentMouseOver=function(a){var b=this.getDomElement();this._unhideListViewScrollbar(b);this._showItemHoverState(a,!0)};
AdfDhtmlListViewPeer.prototype.HandleComponentMouseOut=function(a){var b=this.getDomElement();this._hideListViewScrollbar(b);this._showItemHoverState(a,!1)};
AdfDhtmlListViewPeer.prototype._hideListViewScrollbar=function(a){var b=AdfAgent.AGENT;if(this._scrollbarBehavior==AdfDhtmlListViewPeer._SCROLLBAR_BEHAVIOR_AUTO_HIDE){b=b.getComputedStyle(a);if("hidden"!=a.style.overflowY&&this._verticalScrollPadding&&this._needsVerticalScrollbar(a))if(a.style.overflowY="hidden",AdfDhtmlListViewPeer._isRTL()){var c=AdfAgent.getCSSLengthAsInt(b.paddingLeft);a.style.paddingLeft=c+this._verticalScrollPadding+"px"}else c=AdfAgent.getCSSLengthAsInt(b.paddingRight),a.style.paddingRight=
c+this._verticalScrollPadding+"px";"hidden"!=a.style.overflowX&&this._horizontalScrollPadding&&this._needsHorizontalScrollbar(a)&&(a.style.overflowX="hidden",b=AdfAgent.getCSSLengthAsInt(b.paddingBottom),a.style.paddingBotttom=b+this._horizontalScrollPadding+"px")}};
AdfDhtmlListViewPeer.prototype._unhideListViewScrollbar=function(a){var b=AdfAgent.AGENT;if(this._scrollbarBehavior==AdfDhtmlListViewPeer._SCROLLBAR_BEHAVIOR_AUTO_HIDE){b=b.getComputedStyle(a);if("hidden"==a.style.overflowY&&this._verticalScrollPadding&&this._needsVerticalScrollbar(a))if(a.style.overflowY="auto",AdfDhtmlListViewPeer._isRTL()){var c=AdfAgent.getCSSLengthAsInt(b.paddingLeft);a.style.paddingLeft=c-this._verticalScrollPadding+"px"}else c=AdfAgent.getCSSLengthAsInt(b.paddingRight),a.style.paddingRight=
c-this._verticalScrollPadding+"px";"hidden"==a.style.overflowX&&this._horizontalScrollPadding&&this._needsVerticalScrollbar(a)&&(a.style.overflowX="auto",b=AdfAgent.getCSSLengthAsInt(b.paddingBottom),a.style.paddingBotttom=b-this._horizontalScrollPadding+"px")}};
AdfDhtmlListViewPeer.prototype._showItemHoverState=function(a,b){if(this.__isSelectionEnabled()&&this._isOwnComponentEvent(a)){var c=AdfAgent.AGENT,d=a.getNativeEventTarget();d&&!this._isEmpty&&(d=this.__getRowKeyAndItem(d,this.getDomElement()),null!=d&&(d=d[1])&&null==c.getAttribute(d,AdfDhtmlListViewPeer._GROUP_HEADER_ATTR)&&(b&&!AdfDomUtils.containsCSSClassName(d,AdfDhtmlListViewPeer._SELECTED_CLASS)?AdfDomUtils.addCSSClassName(d,AdfDhtmlListViewPeer._HIGHLIGHTED_CLASS):b||AdfDomUtils.removeCSSClassName(d,
AdfDhtmlListViewPeer._HIGHLIGHTED_CLASS)))}};
AdfDhtmlListViewPeer.prototype.HandleComponentClick=function(a){if(this._isOwnComponentEvent(a)){var b=AdfAgent.AGENT,c=a.getNativeEvent(),d=b.getEventTarget(c);if(d&&!this._isEmpty){var e=this.getComponent(),f=this.__getRowKeyAndItem(d,this.getDomElement());if(null!=f&&a.isLeftButtonPressed()&&(a=f[0],f=f[1]))if(null!=b.getAttribute(f,AdfDhtmlListViewPeer._GROUP_HEADER_ATTR)){if(c=this._getExpandAction(d),null!=c){"expand"==c?e.setGroupDisclosedRowKey(a,!0):e.setGroupDisclosedRowKey(a,!1);return}}else if(this.__isSelectionEnabled()){this.__getSwipeSelected()?
this.__setSwipeSelected(!1):this.__doItemSelection(c,a,f);this._focusRowKey=a;this._isTargetCellEditable(d)||b.eatEvent(c);return}c=d.id;e=AdfRichUIPeer.CreateSubId(e.getClientId(),AdfDhtmlListViewPeer._FETCH_MORE_LINK);c&&-1!=c.indexOf(e)&&this._addMore(c.substring(e.length),b.getIntAttribute(d,AdfDhtmlListViewPeer._FETCH_INDEX_ATTR,-1),!0)}}};
AdfDhtmlListViewPeer.prototype._addMore=function(a,b,c){if(this._scrollMode&&!c&&(c=this.getComponent().getProperty("maxClientRows")-this.getComponent().getProperty("fetchSize")+1,this.getDomElement().getAttribute("_afrtotalrows")-1<=b||c<b||this._loaded>=b))return;c=AdfAgent.AGENT;this._startFetch(AdfListViewDataFetchEvent.MORE_SUBTYPE,a,b);b=this._getDatabody().childNodes;for(var d=b.length,e=null,f=0;f<d;f++){var g=b[f];if(1==g.nodeType&&c.getAttribute(g,AdfDhtmlListViewPeer._ROW_KEY)==a){e=g;
break}}AdfAssert.assert(null!=e,"Could not locate the node to insert after");this._insertAfterNode=e};AdfDhtmlListViewPeer.prototype._queueFetchEvent=function(a,b,c){var d=this._fetchId++,e=this.getComponent(),f=new AdfListViewDataFetchEvent(e,d,a,b,c);f.setPartial(!0);e.queueEvent(f);var g=f.isCanceled();g||(this._pendingFetch=a,this._pendingId=d,this._fetchKey=b,this._fetchIndex=c,f.setRoot(e));return g?null:f};
AdfDhtmlListViewPeer.prototype._startFetch=function(a,b,c){if(a!=this._pendingFetch||b!=this._fetchKey)this._queueFetchEvent(a,b,c)?(a=AdfPage.PAGE.getLookAndFeel().getTranslatedString("af_listView.LABEL_FETCHING"),this._displayStatus(a),AdfDhtmlListViewPeer._setCursor(this._getDatabody(),"wait")):this._hideStatus()};
AdfDhtmlListViewPeer.prototype._displayStatus=function(a){var b=this._getStatusMessage();AdfDhtmlListViewPeer._findFirstChildByTagName(b,"IMG").title=a;a=b.style;if("none"==a.display){var c=this.getDomElement(),d=c.offsetWidth,e=c.offsetHeight;a.zIndex=1E4;a.visibility="hidden";a.display="block";d=d/2-b.offsetWidth/2;b=c.scrollTop+e/2-b.offsetHeight/2;AdfDhtmlListViewPeer._isRTL()?a.left=Math.floor(d)+"px":a.right=Math.floor(d)+"px";a.top=Math.floor(b)+"px";a.visibility="visible"}};
AdfDhtmlListViewPeer.prototype._cancelPendingFetch=function(){this._insertAfterNode=this._pendingId=this._fetchKey=this._pendingFetch=void 0};AdfDhtmlListViewPeer.prototype._handleDataCallback=function(a,b,c,d){var e=a.childNodes.length;b=AdfAgent.AGENT;var f=this._getDatabody(),g=0;if(0<e){e=a.firstChild;for(c=c.nextSibling;e;)c?f.insertBefore(e,c):f.appendChild(e),b.elementsAdded(e),1==e.nodeType&&g++,e=a.firstChild;d.setProperty("rows",d.getProperty("rows")+g,!1,AdfUIComponent.PROPAGATE_NEVER)}};
AdfDhtmlListViewPeer.prototype._hideStatus=function(){this._getStatusMessage().style.display="none"};AdfDhtmlListViewPeer.prototype._getDatabody=function(a){return this._getElemBySubId("db",a)};AdfDhtmlListViewPeer.prototype._getStatusMessage=function(){return this._getElemBySubId("sm")};AdfDhtmlListViewPeer.prototype._getElemBySubId=function(a,b){var c=this.getDomElement();null==c&&(c=b);return AdfDhtmlListViewPeer._getChildBySubId(c,a)};
AdfDhtmlListViewPeer._getChildBySubId=function(a,b){AdfAssert.assert(null!=a,"ListView peer cannot get a child by sub ID if the parent is null!");for(var c=a.id+"::"+b,d=a.childNodes,e=0;e<d.length;e++)if(c==d[e].id)return d[e];return null};AdfDhtmlListViewPeer._findFirstChildByTagName=function(a,b){AdfAssert.assert(null!=a,"ListView peer cannot find first child by tag name if the parent is null!");for(var c=a.childNodes,d=0;d<c.length;d++)if(b==c[d].tagName)return c[d];return null};
AdfDhtmlListViewPeer.prototype.__getRowKeyAndItem=function(a,b){AdfAssert.assertDomElement(a);var c=a,d=AdfAgent.AGENT;if(null==c||1!=c.nodeType)return null;for(var e=d.getAttribute(c,AdfDhtmlListViewPeer._ROW_KEY);null==e;){if(null==c||c==b)return null;c=c.parentNode;if(null==c||1!=c.nodeType)return null;e=d.getAttribute(c,AdfDhtmlListViewPeer._ROW_KEY)}return[e,c]};
AdfDhtmlListViewPeer.prototype._getTargetGroupHeader=function(a){for(var b=null,c=AdfAgent.getAgent(),d=this.getDomElement();a&&a!=d;){if(null!=c.getAttribute(a,AdfDhtmlListViewPeer._GROUP_HEADER_ATTR)){b=a;break}a=a.parentNode}return b};AdfDhtmlListViewPeer.prototype.__setItemSwiped=function(a,b){this._swipedItem={component:a,rootDom:b}};AdfDhtmlListViewPeer.prototype.__getItemSwiped=function(){return this._swipedItem};
AdfDhtmlListViewPeer.prototype.__deleteItemSwiped=function(){this._swipedItem=null};AdfDhtmlListViewPeer.prototype.suppressSelectionEventDelivery=function(a){this._suppressSelectionEventDelivery=a};AdfDhtmlListViewPeer.prototype.canDeliverSelectionEvent=function(){return!this._suppressSelectionEventDelivery};
AdfDhtmlListViewPeer.prototype._isTargetCellEditable=function(a){for(var b=AdfAgent.getAgent(),c,d=this.getDomElement(),e=AdfDhtmlListViewPeer._INPUT_REGEXP;null!=a&&a!=d&&"TD"!=(c=b.getNodeName(a))&&"TH"!=c;){if(c.match(e)){var f=a;if("LABEL"==c){var g=a.getAttribute("for");g?(g=b.getElementById(g))&&b.getNodeName(g).match(e)&&(f=g):(g=a.getElementsByTagName("input"),0!=g.length&&(f=g[0]),g=a.getElementsByTagName("select"),0!=g.length&&(f=g[0]),g=a.getElementsByTagName("textarea"),0!=g.length&&(f=
g[0]))}if(-1!=f.tabIndex)return!0}a=a.parentNode}return!1};AdfDhtmlListViewPeer.prototype._selIsOnlySelection=function(a){var b=this.getComponent().getSelectedRowKeys(),c=b[a];if(c)for(var d in b)if(d!=a){c=!1;break}return c};
AdfDhtmlListViewPeer.prototype._selUpdateAll=function(a){var b=this._getDatabody();if(null!=b){var c=this.getComponent().getSelectedRowKeys();if(c&&!AdfCollections.isEmpty(c))for(var b=b.childNodes,d=AdfAgent.getAgent(),e=b.length,f=0;f<e;++f){var g=b[f];if(1==g.nodeType){var h=d.getAttribute(g,AdfDhtmlListViewPeer._ROW_KEY);if(null!=h)switch(a){case AdfDhtmlListViewPeer._SEL_UPDATE_ALL_SELECT:this._selHighlightItem(g,!0);break;case AdfDhtmlListViewPeer._SEL_UPDATE_ALL_UNSELECT:this._selHighlightItem(g,
!1);break;case AdfDhtmlListViewPeer._SEL_UPDATE_ALL_UPDATE:this._selHighlightItem(g,c[h])}}}}};AdfDhtmlListViewPeer.prototype._selUnselectAll=function(){this._selUpdateAll(AdfDhtmlListViewPeer._SEL_UPDATE_ALL_UNSELECT);this._updateLVSelectionState({})};AdfDhtmlListViewPeer.prototype.__isSelectionEnabled=function(a){a||(a=this.getComponent());return(a=a.getSelection())&&"none"!=a.toLowerCase()};
AdfDhtmlListViewPeer.prototype._isMultipleSelect=function(){var a=this.getComponent().getSelection();return a&&-1!=a.toLowerCase().indexOf("multiple")};AdfDhtmlListViewPeer.prototype._selIsSelected=function(a){return this.getComponent().getSelectedRowKeys()[a]};AdfDhtmlListViewPeer.prototype._selSelectItem=function(a,b,c){this._selHighlightItem(b,!0);c||(b=this.getComponent(),c={},AdfCollections.copyInto(c,b.getSelectedRowKeys()),c[a]=!0,this._updateLVSelectionState(c))};
AdfDhtmlListViewPeer.prototype._selUnselectItem=function(a,b){this._selHighlightItem(b,!1);var c={};AdfCollections.copyInto(c,this.getComponent().getSelectedRowKeys());delete c[a];this._updateLVSelectionState(c)};AdfDhtmlListViewPeer.prototype._selHighlightItem=function(a,b){AdfAssert.assertDomNode(a);b?(AdfDomUtils.addCSSClassName(a,AdfDhtmlListViewPeer._SELECTED_CLASS),AdfDomUtils.removeCSSClassName(a,AdfDhtmlListViewPeer._HIGHLIGHTED_CLASS)):AdfDomUtils.removeCSSClassName(a,AdfDhtmlListViewPeer._SELECTED_CLASS)};
AdfDhtmlListViewPeer.prototype._selectItemRange=function(a,b){var c=this._getDatabody();if(null!=c){var d=AdfAgent.AGENT,e=this.getComponent(),f={};AdfCollections.copyInto(f,e.getSelectedRowKeys());for(var g=e=!1,c=c.childNodes,h=c.length,k=0;k<h;++k){var l=c[k];if(1==l.nodeType&&null==d.getAttribute(l,AdfDhtmlListViewPeer._GROUP_HEADER_ATTR)){var m=d.getAttribute(l,AdfDhtmlListViewPeer._ROW_KEY);if(null!=m){if(m==a||m==b){if(e||a==b)g=!0;e=!0}e&&(this._selSelectItem(m,l,!0),f[m]=!0);if(g)break}}}this._updateLVSelectionState(f)}};
AdfDhtmlListViewPeer.prototype.__setSwipeSelected=function(a){this._swipeSelected=a};AdfDhtmlListViewPeer.prototype.__getSwipeSelected=function(){return this._swipeSelected};
AdfDhtmlListViewPeer.prototype.__doItemSelection=function(a,b,c){var d=this._isMultipleSelect();d&&AdfAgent.AGENT.isSelectionToggle(a)?(this._anchorRowKey=b,this._selIsSelected(b)?this._isActionsFacetDisplayed(c)||this._selUnselectItem(b,c):this._selSelectItem(b,c)):d&&a.shiftKey?(a=this._anchorRowKey,a||(a=this._anchorRowKey=b),this.suppressSelectionEventDelivery(!0),this._selUnselectAll(),this.suppressSelectionEventDelivery(!1),this._selectItemRange(b,a)):(this._anchorRowKey=b,this._selIsOnlySelection(b)||
(this.suppressSelectionEventDelivery(!0),this._selUnselectAll(),this.suppressSelectionEventDelivery(!1),this._selSelectItem(b,c)))};AdfDhtmlListViewPeer.prototype._handleDataBodySelectStart=function(a){a||(a=AdfPage.PAGE.getDomWindow().event);var b=AdfAgent.AGENT;if(!this._isTargetCellEditable(AdfAgent.AGENT.getEventTarget(a))&&(a.shiftKey||a.ctrlKey))return b.preventDefault(a),!1};
AdfDhtmlListViewPeer.prototype._isActionsFacetDisplayed=function(a){if(a){var b=AdfAgent.AGENT,c=AdfRichUIPeer.CreateSubId(a.id,"startFacet");a=AdfRichUIPeer.CreateSubId(a.id,"endFacet");c=b.getElementById(c);b=b.getElementById(a);if(c&&"none"!=c.style.display||b&&"none"!=b.style.display)return!0}return!1};
AdfDhtmlListViewPeer.prototype._updateLVSelectionState=function(a){this._ignoreSelSet=!0;AdfLogger.LOGGER.finer("Update ListView selection state to:",a);this.getComponent().setSelectedRowKeys(a);this._ignoreSelSet=!1};AdfDhtmlListViewPeer.prototype.ComponentSelectedRowKeysChanged=function(a,b,c,d){this._ignoreSelSet||(this._selUpdateAll(AdfDhtmlListViewPeer._SEL_UPDATE_ALL_UNSELECT),this._selUpdateAll(AdfDhtmlListViewPeer._SEL_UPDATE_ALL_UPDATE))};
AdfDhtmlListViewPeer.prototype._findItemByKey=function(a){for(var b=this._getDatabody().childNodes,c=b.length,d=0;d<c;d++){var e=b[d];if(1==e.nodeType&&a==e.getAttribute(AdfDhtmlListViewPeer._ROW_KEY))return e}return null};
AdfDhtmlListViewPeer.prototype.HandleComponentKeyDown=function(a){if(!a.isCanceled()){a=a.getNativeEvent();var b=AdfAgent.AGENT,c=b.getEventTarget(a),d=a.keyCode,e=!0,f=c.id;if(c&&f&&!this._isEmpty){var g=this.getComponent().getClientId();if(f==g)switch(d){case AdfKeyStroke.ESC_KEY:this._isTargetCellEditable(c)||(this._selUnselectAll(),delete this._focusRowKey);break;case AdfKeyStroke.ARROWUP_KEY:case AdfKeyStroke.ARROWDOWN_KEY:e=this._handleArrowUpDown(d==AdfKeyStroke.ARROWUP_KEY,a.ctrlKey,a.shiftKey);
break;case AdfKeyStroke.F2_KEY:case AdfKeyStroke.ENTER_KEY:e=this._handleF2()}else d==AdfKeyStroke.ESC_KEY&&(AdfFocusUtils.focusElement(this.getDomElement()),propogate=!1)}e||b.eatEvent(a)}};
AdfDhtmlListViewPeer.prototype._handleF2=function(){var a=this._focusRowKey;if(null==a){var b=this.getComponent().getSelectedRowKeys(),c;for(c in b)b[c]&&(a=c);this._focusRowKey=a}if(!a)return!0;for(var b=AdfAgent.AGENT,d=this._getDatabody().childNodes,e=d.length,f,g=0;g<e&&(f=d[g],1!=f.nodeType||(c=b.getAttribute(f,AdfDhtmlListViewPeer._ROW_KEY),c!=a));g++);AdfAssert.assert(null!=f);AdfFocusUtils.focusNextTabStop(f);return!1};
AdfDhtmlListViewPeer.prototype._handleArrowUpDown=function(a,b,c){if(this.__isSelectionEnabled()){var d=this._isMultipleSelect(),e=this._focusRowKey;if(null==e){var f=this.getComponent().getSelectedRowKeys(),g;for(g in f)f[g]&&(e=g);this._focusRowKey=e}a=a?this._getPreviousRowKeyAndItem(e):this._getNextRowKeyAndItem(e);g=a.rowKey;if(null!=g){a=a.item;if(c&&d)return this._selIsSelected(g)?this._selUnselectItem(g,a):this._selSelectItem(g,a),this._focusRowKey=g,this._unclipItem(a),!1;if(!b||!d)return this._selUnselectAll(),
this._selSelectItem(g,a),this._unclipItem(a),this._focusRowKey=g,!1}}return!0};AdfDhtmlListViewPeer.prototype._unclipItem=function(a){var b=this.getDomElement(),c=b.scrollTop,d=a.offsetTop;if(d>=c+b.offsetHeight||d+a.offsetHeight<=c)b.scrollTop=d};
AdfDhtmlListViewPeer.prototype._getNextRowKeyAndItem=function(a){for(var b=AdfAgent.AGENT,c=this._getDatabody(),d=c.childNodes,e=d.length,f={},g=0;g<e;g++){var h=d[g];if(1==h.nodeType){var k=b.getAttribute(h,AdfDhtmlListViewPeer._ROW_KEY),l=null!=b.getAttribute(h,AdfDhtmlListViewPeer._GROUP_HEADER_ATTR);if(null==a&&!l){f.rowKey=k;f.item=h;break}else if(k==a&&g+1<e){h=AdfDomUtils.getNextElement(h);for(l=null!=b.getAttribute(h,AdfDhtmlListViewPeer._GROUP_HEADER_ATTR);l&&h!=AdfDomUtils.getLastChildElement(c);)h=
AdfDomUtils.getNextElement(h),l=null!=b.getAttribute(h,AdfDhtmlListViewPeer._GROUP_HEADER_ATTR);l||(k=b.getAttribute(h,AdfDhtmlListViewPeer._ROW_KEY),f.rowKey=k,f.item=h);break}}}return f};
AdfDhtmlListViewPeer.prototype._getPreviousRowKeyAndItem=function(a){for(var b=AdfAgent.AGENT,c=this._getDatabody(),d=c.childNodes,e={},f=d.length-1;0<=f;f--){var g=d[f];if(1==g.nodeType){var h=b.getAttribute(g,AdfDhtmlListViewPeer._ROW_KEY),k=null!=b.getAttribute(g,AdfDhtmlListViewPeer._GROUP_HEADER_ATTR);if(null==a&&!k){e.rowKey=h;e.row=g;break}else if(h==a&&0<=f-1){g=AdfDomUtils.getPreviousElement(g);for(k=null!=b.getAttribute(g,AdfDhtmlListViewPeer._GROUP_HEADER_ATTR);k&&g!=AdfDomUtils.getFirstChildElement(c);)g=
AdfDomUtils.getPreviousElement(g),k=null!=b.getAttribute(g,AdfDhtmlListViewPeer._GROUP_HEADER_ATTR);k||(h=b.getAttribute(g,AdfDhtmlListViewPeer._ROW_KEY),e.rowKey=h,e.item=g);break}}}return e};AdfDhtmlListViewPeer._isRTL=function(){return AdfPage.PAGE.getLocaleContext().isRightToLeft()};AdfDhtmlListViewPeer.prototype._isOwnComponentEvent=function(a){a=a.getSource();for(var b=this.getComponent(),c=!1;!c&&a;)if(a==b)c=!0;else{if(a instanceof AdfRichListView||a instanceof AdfUIPopup)break;a=a.getParent()}return c};
AdfDhtmlListViewPeer._setCursor=function(a,b){a&&a.style.cursor!=b&&(a.style.cursor=b)};AdfDhtmlListViewPeer.prototype.isDragAvailable=function(a){AdfAssert.assertDomElement(a);return a&&this._isTargetCellEditable(a)?!1:!0};AdfDhtmlListViewPeer.prototype.getRowKeyForEvent=function(a){a=a.getNativeEventTarget();if(null==this._getTargetGroupHeader(a)){var b=this.getDomElement();a=this.__getRowKeyAndItem(a,b);if(null!=a)return a[0]}return null};
AdfDhtmlListViewPeer.prototype.applyDragReadyStateForRowKeys=function(a,b,c){AdfAssert.assertArray(c);a=this._getDomNodesForDrag(c);b=0;for(c=a.length;b<c;++b)AdfDomUtils.addCSSClassName(a[b],AdfRichUIPeer.DRAG_READY_STYLECLASS);return a};AdfDhtmlListViewPeer.prototype.ClearDragReadyState=function(a){AdfAssert.assertArray(a);for(var b=0,c=a.length;b<c;++b)AdfDomUtils.removeCSSClassName(a[b],AdfRichUIPeer.DRAG_READY_STYLECLASS)};
AdfDhtmlListViewPeer.prototype.applyDragSourceStateForRowKeys=function(a,b,c){AdfAssert.assertArray(c);a=this._getDomNodesForDrag(c);b=0;for(c=a.length;b<c;++b)AdfDomUtils.addCSSClassName(a[b],AdfRichUIPeer.DRAG_SOURCE_STYLECLASS);return a};AdfDhtmlListViewPeer.prototype.ClearDragSourceState=function(a){AdfAssert.assertArray(a);for(var b=0,c=a.length;b<c;++b)AdfDomUtils.removeCSSClassName(a[b],AdfRichUIPeer.DRAG_SOURCE_STYLECLASS)};
AdfDhtmlListViewPeer.prototype.getDragOffsetForRowKeys=function(a,b){var c=a.getNativeEventTarget(),d=this.getDomElement(),e=this.__getRowKeyAndItem(c,d),d=c=0,f=AdfAgent.AGENT;if(null!=e)for(var g=e[0],e=e[1],h=0;h<b.length;h++)if(b[h]==g){g=f.getElementPosition(e);f=f.getMousePosition(a.getNativeEvent());c=f.x-g.x;d+=f.y-g.y;break}else{var k=this._findItemByKey(b[h]);AdfAssert.assert(null!=k);d+=k.offsetHeight}return{x:c,y:d}};
AdfDhtmlListViewPeer.prototype.getDragNodeForRowKeys=function(a){AdfAssert.assertArray(a);var b=this.getDomDocument().createElement("div");a=this._getDomNodesForDrag(a);for(var c=0,d=a.length;c<d;++c){var e=this._cloneItemForDrag(a[c]);b.appendChild(e)}return b};AdfDhtmlListViewPeer.prototype._getLastRowKey=function(){for(var a=AdfAgent.AGENT,b=this._getDatabody().childNodes,c=b.length-1;0<=c;c--){var d=b[c];if(1==d.nodeType&&(rowKey=a.getAttribute(d,AdfDhtmlListViewPeer._ROW_KEY),null!=rowKey))return rowKey}return null};
AdfDhtmlListViewPeer.prototype._getDomNodesForDrag=function(a){for(var b=[],c=0;c<a.length;++c){var d=this._findItemByKey(a[c]);d&&b.push(d)}return b};AdfDhtmlListViewPeer.prototype._cloneItemForDrag=function(a){var b=a.cloneNode(!0),c=AdfAgent.AGENT;c.copyStyle(a,b);c.setOpacity(b,50);return b};
AdfDhtmlListViewPeer.prototype.getRowKeyAndOrientationFromHints=function(a,b,c){AdfAssert.assertNumber(a);AdfAssert.assertNumber(b);AdfAssert.assert(null!=c);var d=c[AdfStampedDropTarget.HINT_LAST_ROWKEY],e=c[AdfStampedDropTarget.HINT_LAST_ROWKEY_BOUNDS],f=c[AdfStampedDropTarget.HINT_LAST_DROP_ORIENTATION];if(d&&e&&(AdfAssert.assertString(d),AdfAssert.assertObject(e),a>=e.left&&b>=e.top&&a<=e.right&&b<=e.bottom)){c[AdfStampedDropTarget.ROW_KEY]=d;c[AdfStampedDropTarget.DROP_ORIENTATION]=f;return}this._getRowKeyAndOrientationForPosition(a,
b,c)};
AdfDhtmlListViewPeer.prototype._getRowKeyAndOrientationForPosition=function(a,b,c){AdfAssert.assertNumber(a);AdfAssert.assertNumber(b);var d=this._getDatabody(),e=AdfDomUtils.getElementAtPoint(d,a,b);if(e&&(e=this.__getRowKeyAndItem(e,this.getDomElement()),null!=e)){c[AdfStampedDropTarget.ROW_KEY]=e[0];c[AdfStampedDropTarget.DROP_ORIENTATION]=AdfDropEvent.DROP_ORIENTATION_ON;return}this.IsEmpty?(c[AdfStampedDropTarget.ROW_KEY]=null,c[AdfStampedDropTarget.DROP_ORIENTATION]=AdfDropEvent.DROP_ORIENTATION_AFTER):AdfAgent.AGENT.pointInElementBounds(d,
a,b)?(c[AdfStampedDropTarget.ROW_KEY]=this._getLastRowKey(),c[AdfStampedDropTarget.DROP_ORIENTATION]=AdfDropEvent.DROP_ORIENTATION_AFTER):(c[AdfStampedDropTarget.ROW_KEY]=null,c[AdfStampedDropTarget.DROP_ORIENTATION]=AdfDropEvent.DROP_ORIENTATION_ON)};
AdfDhtmlListViewPeer.prototype.showDragFeedback=function(a,b,c,d,e,f,g){AdfAssert.assertPrototype(a,AdfDnDContext);AdfAssert.assertStringOrNull(b);AdfAssert.assertNumber(c);AdfAssert.assertStringOrNull(d);c==AdfDnDContext.ACTION_NONE&&(AdfDomUtils.removeCSSClassName(this._getDatabody(),AdfDhtmlListViewPeer._DROP_TARGET_CLASS),b=null);d!=b&&(d&&(a=this._findItemByKey(d))&&AdfDomUtils.removeCSSClassName(a,AdfDhtmlListViewPeer._DROP_TARGET_CLASS),b&&(a=this._findItemByKey(b)))&&(AdfDomUtils.addCSSClassName(a,
AdfDhtmlListViewPeer._DROP_TARGET_CLASS),AdfDomUtils.removeCSSClassName(this._getDatabody(),AdfDhtmlListViewPeer._DROP_TARGET_CLASS));null==b&&c!=AdfDnDContext.ACTION_NONE&&AdfDomUtils.addCSSClassName(this._getDatabody(),AdfDhtmlListViewPeer._DROP_TARGET_CLASS)};AdfDhtmlListViewPeer.prototype.getRowKeyBounds=function(a){return a?(a=this._findItemByKey(a))?AdfAgent.AGENT.getElementPageBounds(a):null:null};
AdfDhtmlListViewPeer.prototype.ConvertClientIdToLocator=function(a,b,c,d){b=a.getClientId();a=AdfStrings.count(b,":");AdfAssert.assert(0<=c.indexOf(b));c=c.substring(b.length+1);b=c.indexOf(":");0<b&&(c=c.substring(0,b),c=this._findItemByKey(c),d.push([a+1,c?AdfDomUtils.getElementPosition(c):null]))};
AdfDhtmlListViewPeer.prototype.convertLocatorToClientId=function(a,b){var c=a.getClientId(),d=null,e=this._getDatabody();if(null!=e)for(var e=e.childNodes,f=e.length,g=0,h=0;h<f;h++){var k=e[h];if(1==k.nodeType&&(g++,b==g)){d=k.getAttribute(AdfDhtmlListViewPeer._ROW_KEY);break}}return d?c+":"+d:null};
AdfDhtmlListViewPeer.prototype.getRowIndex=function(a){AdfAssert.assertString(a);AdfAssert.assert(null!=a,"Row Key cannot be null");return(a=this._findItemByKey(a))?AdfDomUtils.getElementPosition(a):-1};
AdfDhtmlListViewPeer.prototype.getRowKey=function(a){AdfAssert.assertNumber(a);var b=this.getComponent().getProperty("rows");AdfAssert.assert(0<=a&&a<b,"index must be greater than or equal to 0 or less than the number of rows on the client");var b=null,c=this._getDatabody();null!=c&&(b=AdfDomUtils.getChildElementByPosition(c,1,a).getAttribute(AdfDhtmlListViewPeer._ROW_KEY));return b};
AdfRichUIPeer.createPeerClass(AdfRichUIPeer,"AdfDhtmlListItemPeer");AdfDhtmlListItemPeer.prototype.InitDomElement=function(a,b){AdfSwipeToRevealUtils.isSwipeEnabled(a)&&(a._swipeEnabled=!0,AdfSwipeToRevealUtils.setUpSwipeActions(a,b));AdfDhtmlListItemPeer.superclass.InitDomElement.call(this,a,b)};AdfDhtmlListItemPeer.InitSubclass=function(){AdfRichUIPeer.addComponentEventHandlers(this,AdfUIInputEvent.MOUSE_DOWN_EVENT_TYPE,AdfComponentTouchEvent.TOUCH_START_EVENT_TYPE,AdfActionEvent.ACTION_EVENT_TYPE)};
AdfDhtmlListItemPeer.prototype.HandleComponentMouseDown=function(a){this._checkSwipeInitiateDrag(a)};AdfDhtmlListItemPeer.prototype.HandleComponentTouchStart=function(a){this._checkSwipeInitiateDrag(a,!0)};AdfDhtmlListItemPeer.prototype.HandleComponentAction=function(a){a=this.getComponent();AdfSwipeToRevealUtils.isSwipeEnabled(a)&&AdfSwipeToRevealUtils.tearDownSwipeActions(a,this.getDomElement())};
AdfDhtmlListItemPeer.prototype._checkSwipeInitiateDrag=function(a,b){var c=this.getComponent();c._swipeEnabled&&"oracle.adf.RichCommandImageLink"!=a.getSource().getComponentType()&&!AdfSwipeToRevealUtils.isEventInFacet(a,c)&&this._startDrag(a)};
AdfDhtmlListItemPeer.prototype._startDrag=function(a){a=a.getNativeEvent();var b=this.getComponent(),c=this.createCallback(this._handleDrag),d=this.createCallback(this._handleDrop),e=b.getParent().getPeer(),f=e.__getItemSwiped();f&&(AdfSwipeToRevealUtils.tearDownSwipeActions(f.component,f.rootDom),e.__deleteItemSwiped());AdfSwipeToRevealUtils.startDrag(b,a,c,d)};
AdfDhtmlListItemPeer.prototype._handleDrag=function(a,b,c){var d=this.getDomElement(),e=this.getComponent();AdfSwipeToRevealUtils.recognizeDrag(a,e,d)&&(a=e.getParent().getPeer(),a.__getItemSwiped()||a.__setItemSwiped(e,d),d=a.__getItemSwiped(),AdfSwipeToRevealUtils.handleDrag(d.component,d.rootDom,b,c))};
AdfDhtmlListItemPeer.prototype._handleDrop=function(a,b,c){b=this.getComponent().getParent().getPeer();var d=b.__getItemSwiped();d&&(c=d.component,d=d.rootDom,AdfSwipeToRevealUtils.handleDrop(c,d),this._handleSelection(a,b,d),AdfSwipeToRevealUtils.handleDefaultAction(c),delete c._swipeContext)};AdfDhtmlListItemPeer.prototype._handleSelection=function(a,b,c){if(b.__isSelectionEnabled()){var d=b.__getRowKeyAndItem(c,b.getDomElement());b.__setSwipeSelected(!0);b.__doItemSelection(a,d[0],c)}};
AdfDhtmlListItemPeer.prototype.needsResizeNotify=function(a){return!0};
var AdfSwipeToRevealUtils={setUpSwipeActions:function(a){AdfAssert.assert(null!=a);var b=AdfAgent.getAgent(),c=a.getClientId(),d=AdfRichUIPeer.CreateSubId(c,AdfSwipeToRevealUtils._START_FACET),c=AdfRichUIPeer.CreateSubId(c,AdfSwipeToRevealUtils._END_FACET),d=b.getElementById(d),b=b.getElementById(c);d&&(c=AdfDomUtils.getChildElements(d.firstChild).length,d=AdfSwipeToRevealUtils._getTotalFacetWidth(d),"auto"==d&&(d=c*parseInt(AdfSwipeToRevealUtils._DEFAULT_ACTIONS_WIDTH)+"px"),a._minStartFacetWidth=
d);b&&(d=AdfDomUtils.getChildElements(b.firstChild).length,b=AdfSwipeToRevealUtils._getTotalFacetWidth(b),"auto"==b&&(b=d*parseInt(AdfSwipeToRevealUtils._DEFAULT_ACTIONS_WIDTH)+"px"),a._minEndFacetWidth=b)},isSwipeEnabled:function(a){AdfAssert.assert(null!=a);var b=AdfAgent.getAgent(),c=a.getClientId();a=AdfRichUIPeer.CreateSubId(c,AdfSwipeToRevealUtils._START_FACET);c=AdfRichUIPeer.CreateSubId(c,AdfSwipeToRevealUtils._END_FACET);a=b.getElementById(a);b=b.getElementById(c);return a||b},startDrag:function(a,
b,c,d){AdfAssert.assert(null!=a);AdfAssert.assert(null!=b);AdfAssert.assertObject(a);AdfAssert.assertObject(b);AdfAssert.assertFunction(c);AdfAssert.assertFunction(d);var e=AdfAgent.AGENT.getMousePosition(b);a._swipeContext={startPageX:e.x,startPageY:e.y,dragging:!0};AdfPage.PAGE.startDrag(b,c,d,void 0,!1)},recognizeDrag:function(a,b,c){AdfAssert.assert(null!=b);AdfAssert.assert(null!=a);var d=a.pageX,e=a.pageY;a.targetTouches&&(e=a.targetTouches,d=e[0].pageX,e=e[0].pageY);if(b._swipeContext){var f=
AdfAgent.AGENT.isTouchFirstDevice()?10:3;if(Math.abs(b._swipeContext.startPageX-d)>f||Math.abs(b._swipeContext.startPageY-e)>f)return AdfLogger.LOGGER.fine("Drag recognized for:",a),a;AdfSwipeToRevealUtils.tearDownSwipeActions(b,c)}else b._swipeContext={startPageX:d,startPageY:e,dragging:!0}},handleDrag:function(a,b,c,d){AdfAssert.assert(null!=a);AdfAssert.assert(null!=b);AdfAssert.assertNumber(c);AdfAssert.assertNumber(d);var e=b.firstChild;d=AdfSwipeToRevealUtils._getDragDirection(c,d);var f=AdfAgent.getAgent(),
g=a.getClientId(),h=AdfPage.PAGE.getLocaleContext().isRightToLeft(),k=a._swipeContext,l=AdfPage.PAGE.getLookAndFeel();if(d!=AdfSwipeToRevealUtils._DRAG_UP&&d!=AdfSwipeToRevealUtils._DRAG_DOWN){var m=AdfRichUIPeer.CreateSubId(g,AdfSwipeToRevealUtils._START_FACET),g=AdfRichUIPeer.CreateSubId(g,AdfSwipeToRevealUtils._END_FACET),n=e.style.transform.replace(/translate3d|px|\(|\)/gi,"").split(",");c=Number(n[0])+c;if(0<Math.abs(c)){AdfDomUtils.removeCSSClassName(e,l.getStyleClass(AdfSwipeToRevealUtils._DROP_ANIMATION_CLASS));
g=f.getElementById(g);m=(f=f.getElementById(m))&&"flex"==f.style.display;(n=g&&"flex"==g.style.display)&&AdfDomUtils.removeCSSClassName(g,l.getStyleClass(AdfSwipeToRevealUtils._DROP_ACTIONS_WIDTH_ANIMATION_CLASS));m&&AdfDomUtils.removeCSSClassName(f,l.getStyleClass(AdfSwipeToRevealUtils._DROP_ACTIONS_WIDTH_ANIMATION_CLASS));if(d==AdfSwipeToRevealUtils._DRAG_LEFT&&0>c){if(!h&&m){delete k._dragging;return}if(h&&n){delete k._dragging;return}}if(d==AdfSwipeToRevealUtils._DRAG_RIGHT&&0<c){if(!h&&n){delete k._dragging;
return}if(h&&m){delete k._dragging;return}}l=g&&"flex"==g.style.display?g:f;m=g&&"flex"==g.style.display?!1:!0;AdfSwipeToRevealUtils._shouldTriggerDefaultAction(a,b,l,m)?(a=AdfSwipeToRevealUtils._getDefaultActionAndResize(l,m,!0),k._defaultActionItem=a):(k._defaultActionItem&&delete k._defaultActionItem,AdfSwipeToRevealUtils._getDefaultActionAndResize(l,m,!1));h?d==AdfSwipeToRevealUtils._DRAG_LEFT?AdfSwipeToRevealUtils._handleDragRight(f,g,c):d==AdfSwipeToRevealUtils._DRAG_RIGHT&&AdfSwipeToRevealUtils._handleDragLeft(f,
g,c):d==AdfSwipeToRevealUtils._DRAG_LEFT?AdfSwipeToRevealUtils._handleDragLeft(f,g,c):d==AdfSwipeToRevealUtils._DRAG_RIGHT&&AdfSwipeToRevealUtils._handleDragRight(f,g,c);m=f&&"flex"==f.style.display;n=g&&"flex"==g.style.display;if(m||n)e.style.transform="translate3d("+c+"px, 0px, 0px)"}}},_handleDragLeft:function(a,b,c){a&&"flex"==a.style.display?a.style.width=""+Math.abs(c)+"px":b&&(b.style.display="flex",b.style.width=""+Math.abs(c)+"px")},_handleDragRight:function(a,b,c){b&&"flex"==b.style.display?
b.style.width=""+Math.abs(c)+"px":a&&(a.style.display="flex",a.style.width=""+Math.abs(c)+"px",isStartFacetDisplayed=!0)},handleDrop:function(a,b){AdfAssert.assert(null!=a);AdfAssert.assert(null!=b);var c=b.firstChild,d=a.getClientId(),e=AdfAgent.getAgent(),f=AdfPage.PAGE.getLocaleContext().isRightToLeft(),g=a._swipeContext,h=AdfPage.PAGE.getLookAndFeel();AdfDomUtils.addCSSClassName(c,h.getStyleClass(AdfSwipeToRevealUtils._DROP_ANIMATION_CLASS));g._defaultActionItem||(g=AdfRichUIPeer.CreateSubId(d,
AdfSwipeToRevealUtils._START_FACET),d=AdfRichUIPeer.CreateSubId(d,AdfSwipeToRevealUtils._END_FACET),d=e.getElementById(d),e=e.getElementById(g),g=parseInt(window.getComputedStyle(b,null).getPropertyValue("width"),10),d&&"flex"==d.style.display?AdfSwipeToRevealUtils._handleDropAnimation(d,c,a._minEndFacetWidth,g,!1,f):e&&"flex"==e.style.display&&AdfSwipeToRevealUtils._handleDropAnimation(e,c,a._minStartFacetWidth,g,!0,f))},_setDisplayOnTransition:function(a){a.style.display="none"},_handleDropAnimation:function(a,
b,c,d,e,f){var g=AdfPage.PAGE.getLookAndFeel();AdfDomUtils.addCSSClassName(a,g.getStyleClass(AdfSwipeToRevealUtils._DROP_ACTIONS_WIDTH_ANIMATION_CLASS));var g=parseInt(a.style.width,10),h=parseInt(c,10);if(g>=h||g>=.25*d)b.style.transform=f?e?"translate3d("+-h+"px, 0px, 0px)":"translate3d("+h+"px, 0px, 0px)":e?"translate3d("+h+"px, 0px, 0px)":"translate3d("+-h+"px, 0px, 0px)",a.style.width=c;else{b.style.transform="translate3d(0px, 0px, 0px)";a.style.width=c;var k=function(b){AdfSwipeToRevealUtils._setDisplayOnTransition(a);
this.removeEventListener("transitionend",k)};b.addEventListener("transitionend",k)}},handleDefaultAction:function(a){a=a._swipeContext;null!=a._defaultActionItem&&(a=a._defaultActionItem,AdfActionEvent.queue(a,a.getPartialSubmit()))},tearDownSwipeActions:function(a,b){AdfAssert.assert(null!=a);AdfAssert.assert(null!=b);delete a._swipeContext;AdfSwipeToRevealUtils.restoreListItemView(a,b)},restoreListItemView:function(a,b){AdfAssert.assert(null!=a);AdfAssert.assert(null!=b);var c=AdfAgent.getAgent(),
d=a.getClientId(),e=b.firstChild,f=AdfRichUIPeer.CreateSubId(d,AdfSwipeToRevealUtils._START_FACET),d=AdfRichUIPeer.CreateSubId(d,AdfSwipeToRevealUtils._END_FACET),f=c.getElementById(f),c=c.getElementById(d);""!=e.style.transform&&(e.style.transform="translate3d(0px, 0px, 0px)");f&&"none"!=f.style.display&&(f.style.display="none");c&&"none"!=c.style.display&&(c.style.display="none")},isEventInFacet:function(a,b){AdfAssert.assert(null!=a);AdfAssert.assert(null!=b);var c=AdfAgent.AGENT,d=b.getClientId(),
e=a.getNativeEvent(),f=AdfRichUIPeer.CreateSubId(d,AdfSwipeToRevealUtils._START_FACET),d=AdfRichUIPeer.CreateSubId(d,AdfSwipeToRevealUtils._END_FACET),f=c.getElementById(f),d=c.getElementById(d),g;f&&(g=c.isEventInElement(e,f));!g&&d&&(g=c.isEventInElement(e,d));return g},_getTotalFacetWidth:function(a){a=a.firstChild.children;var b=0;for(i=0;i<a.length;i++){var c=window.getComputedStyle(a[i],null).getPropertyValue("width");if(!c||"auto"==c)return"auto";b+=parseInt(c,10)}return""+b+"px"},_getDragDirection:function(a,
b){var c=180/3.14*Math.atan2(b,a);if(Math.abs(a)>Math.abs(b)&&0<a)return AdfSwipeToRevealUtils._DRAG_RIGHT;if(Math.abs(a)>Math.abs(b)&&0>a)return AdfSwipeToRevealUtils._DRAG_LEFT;if(Math.abs(b)>Math.abs(a)&&0<b)return AdfSwipeToRevealUtils._checkSwipeAngleTolerance(a,c)||AdfSwipeToRevealUtils._DRAG_UP;if(Math.abs(b)>Math.abs(a)&&0>b)return AdfSwipeToRevealUtils._checkSwipeAngleTolerance(a,c)||AdfSwipeToRevealUtils._DRAG_DOWN},_checkSwipeAngleTolerance:function(a,b){return 0<a&&Math.abs(b)<AdfSwipeToRevealUtils._MAX_RESTRAINT?
AdfSwipeToRevealUtils._DRAG_RIGHT:0>a&&Math.abs(b)>Number(180-AdfSwipeToRevealUtils._MAX_RESTRAINT)?AdfSwipeToRevealUtils._DRAG_LEFT:null},_shouldTriggerDefaultAction:function(a,b,c,d){if(!c)return!1;d=0;b=parseInt(window.getComputedStyle(b,null).getPropertyValue("width"),10);a=a._swipeContext;d=50*b/100;a.swipeThreshold=d;return parseInt(c.style.width)>d?!0:!1},_getDefaultActionAndResize:function(a,b,c){if(a){a=a.firstChild.children;var d;for(i=0;i<a.length;i++)AdfDomUtils.containsCSSClassName(a[i],
AdfSwipeToRevealUtils._DEFAULT_ACTION_TRIGGER_CLASS)?(d&&AdfLogger.LOGGER.warning("Duplicate default item, one of the action item has already beenmarked as default.",a[i]),d=a[i]):a[i].style.maxWidth=c?"0":"100%";d&&(c=d.getElementsByTagName("A")[0],d=AdfPage.PAGE.findComponent(c.id));return d}},_START_FACET:"stFct",_END_FACET:"ndFct",_DRAG_LEFT:"left",_DRAG_RIGHT:"right",_DRAG_UP:"up",_DRAG_DOWN:"down",_DEFAULT_ACTION_TRIGGER_CLASS:"AFDefaultTrigger",_DEFAULT_ACTIONS_WIDTH:"75px",_MAX_RESTRAINT:40,
_DROP_ANIMATION_CLASS:"AFDropAnimation",_DROP_ACTIONS_WIDTH_ANIMATION_CLASS:"AFDropActionsWidthAnimation"};